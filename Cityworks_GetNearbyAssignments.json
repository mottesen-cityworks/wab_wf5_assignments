{"components":[{"steps":[{"inputs":{"x":{"accessors":["$serviceRequestGraphicsLoop1"],"annotations":[{"kind":"idref","index":0,"count":28}],"code":"$serviceRequestGraphicsLoop1.item.SRX","source":"$serviceRequestGraphicsLoop1.item.SRX"},"y":{"accessors":["$serviceRequestGraphicsLoop1"],"annotations":[{"kind":"idref","index":0,"count":28}],"code":"$serviceRequestGraphicsLoop1.item.SRY","source":"$serviceRequestGraphicsLoop1.item.SRY"},"spatialReference":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.cityworksSpatialReference","source":"$wfInputs.json.cityworksSpatialReference"}},"id":938,"action":"gcx:wf:arcgis::CreatePoint","position":"-1190,440","title":"Create Point","name":"requestLocation2"},{"inputs":{"expression":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result.map(function (a) { return a.attributes[\"SRY\"]; })[0]","source":"$selectedSRs.result.map(a => a.attributes[\"SRY\"])[0]"}},"transitions":[{"inputs":{},"id":935,"target":{"id":938},"position":"-1060,580 -1060,520 -1070,520 -1070,500","sourceConnector":"top","targetConnector":"bottom"}],"id":930,"action":"gcx:wf:core::CreateValue","position":"-1180,580","title":"Get Selected RequestId Y Coordinate","name":"getSelectedRequestIdY"},{"inputs":{"expression":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result.map(function (a) { return a.attributes[\"SRX\"]; })[0]","source":"$selectedSRs.result.map(a => a.attributes[\"SRX\"])[0]"}},"transitions":[{"inputs":{},"id":934,"target":{"id":930},"position":"-1060,730 -1060,640","sourceConnector":"top","targetConnector":"bottom"}],"id":927,"action":"gcx:wf:core::CreateValue","position":"-1180,730","title":"Get Selected RequestId X Coordinate","name":"getSelectedRequestIdX"},{"inputs":{},"transitions":[{"inputs":{},"id":5,"target":{"id":4},"position":"180,30 260,30"}],"id":3,"purpose":"start","title":"Start","position":"0,0"},{"inputs":{},"transitions":[{"inputs":{},"id":27,"target":{"id":24},"position":"380,60 380,80 570,80 570,-40 710,-40 710,-20","sourceConnector":"bottom","targetConnector":"top"}],"id":4,"action":"gcx:wf:app::GetApplicationInfo","position":"260,0","title":"Get Application Info","name":"appInfo1"},{"inputs":{},"transitions":[{"inputs":{},"id":387,"target":{"id":50},"position":"830,40 920,40 920,-40 1060,-40 1060,-20","sourceConnector":"right","targetConnector":"top"}],"id":24,"action":"gcx:wf:core::Container","description":"Get arguments and JSON config.","position":"590,-20","title":"Initialize"},{"inputs":{},"transitions":[{"inputs":{},"id":454,"target":{"id":462},"position":"1060,70 1060,90 920,90 920,-40 1320,-40 1320,100","sourceConnector":"bottom","targetConnector":"top"}],"id":50,"action":"gcx:wf:core::Container","position":"940,-20","title":"Authenticate"},{"inputs":{"key":"CachedToken"},"transitions":[{"inputs":{},"id":463,"target":{"id":78},"position":"1320,240 1320,260 1130,260 1130,110 990,110 990,130","sourceConnector":"bottom","targetConnector":"top"}],"id":462,"action":"gcx:wf:app::GetApplicationData","position":"1200,100","title":"Get Cached Token","description":"After Authentication / Validation, a token should be cached. Retrieve and use for future Cityworks API calls","name":"cachedToken1"},{"inputs":{},"transitions":[{"inputs":{},"id":604,"target":{"id":218},"position":"990,220 990,240 710,240 710,130 570,130 570,150","sourceConnector":"bottom","targetConnector":"top"}],"id":78,"action":"gcx:wf:core::Container","description":"","position":"870,130","title":"Capture Current Location"},{"inputs":{},"transitions":[{"inputs":{},"id":737,"target":{"id":661},"position":"570,300 570,320 250,320 250,110 110,110 110,130","sourceConnector":"bottom","targetConnector":"top"}],"id":218,"action":"gcx:wf:core::Container","description":"Get the current map extent, project it and create the correct JSON data package.","position":"450,150","title":"Capture Map Extent"},{"inputs":{},"transitions":[{"inputs":{},"id":527,"target":{"id":524},"position":"110,280 110,360 120,360 120,380","sourceConnector":"bottom","targetConnector":"top"}],"id":661,"action":"gcx:wf:core::Container","description":"Use map extent to find assigned work activities on the map.  Present a picklist.","position":"-10,130","title":"Find Assignments"},{"inputs":{"value":{"accessors":["$formNav"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$formNav.result","source":"$formNav.result"}},"transitions":[{"inputs":{},"id":532,"target":{"id":530},"position":"120,440 120,500 130,500 130,520","purpose":"default","sourceConnector":"bottom","targetConnector":"top","title":"exit"},{"inputs":{},"id":546,"target":{"id":504},"branch":"next","position":"0,410 -250,410 -250,430","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":538,"target":{"id":218},"branch":"back","position":"240,410 570,410 570,300","sourceConnector":"right","targetConnector":"bottom"}],"id":524,"action":"gcx:wf:core::Switch","position":"0,380","title":"Form Nav"},{"inputs":{"layerId":"lyr_CurrentPosition"},"transitions":[{"inputs":{},"id":502,"target":{"id":500},"position":"130,550 130,600","sourceConnector":"bottom","targetConnector":"top"}],"id":530,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"10,520","title":"Clear Current Position Layer"},{"inputs":{"layerId":"lyr_CurrentPosition_buffer_result"},"transitions":[{"inputs":{},"id":507,"target":{"id":885},"position":"130,630 130,680","sourceConnector":"bottom","targetConnector":"top"}],"id":500,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"10,600","title":"Clear Buffer Layer"},{"inputs":{"layerId":"lyr_ServiceRequests"},"transitions":[{"inputs":{},"id":886,"target":{"id":534},"position":"130,740 130,790 120,790 120,810","sourceConnector":"bottom","targetConnector":"top"}],"id":885,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"10,680","title":"Clear Service Requests Layer","description":"They will be re-drawn"},{"inputs":{},"id":534,"action":"gcx:wf:core::Exit","position":"60,810","title":"Exit"},{"inputs":{"expression":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result.map(function (a) { return a.attributes[\"RequestId\"]; })[0]","source":"$selectedSRs.result.map(a => a.attributes[\"RequestId\"])[0]"}},"transitions":[{"inputs":{},"id":933,"target":{"id":544},"position":"-250,490 -250,730 -480,730 -480,750","sourceConnector":"bottom","targetConnector":"top"}],"id":504,"action":"gcx:wf:core::CreateValue","position":"-370,430","title":"Get Selected RequestId","name":"getSelectedRequestId"},{"inputs":{"condition":{"accessors":["$selectServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":25}],"code":"$selectServiceRequestForm.state.radioGroup1.value == \"open\"","source":"$selectServiceRequestForm.state.radioGroup1.value == \"open\""}},"transitions":[{"inputs":{},"id":424,"target":{"id":901},"branch":"false","position":"-360,795 -260,795 -260,880","sourceConnector":"right","targetConnector":"top"},{"inputs":{},"id":574,"target":{"id":945},"branch":"true","position":"-600,795 -760,795 -760,660","sourceConnector":"left","targetConnector":"bottom"}],"id":544,"action":"gcx:wf:core::If","position":"-600,750","title":"If","description":"Open Service Request?"},{"inputs":{},"transitions":[{"inputs":{},"id":904,"target":{"id":881},"position":"-140,925 750,925 750,580","sourceConnector":"right","targetConnector":"bottom"}],"id":901,"action":"gcx:wf:core::Container","position":"-380,880","title":"Cancel SR"},{"inputs":{"layerId":"lyr_ServiceRequests"},"transitions":[{"inputs":{},"id":908,"target":{"id":78},"position":"870,550 990,550 990,220","sourceConnector":"right","targetConnector":"bottom"}],"id":881,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"630,520","title":"Clear Service Requests Layer","description":"They will be re-drawn"},{"inputs":{},"transitions":[{"inputs":{},"id":636,"target":{"id":881},"position":"-410,330 -410,360 610,360 610,550 630,550","sourceConnector":"bottom","targetConnector":"left"}],"id":550,"action":"gcx:wf:core::Container","position":"-530,240","title":"Complete SR"},{"inputs":{"layerId":"lyr_Route"},"transitions":[{"inputs":{},"id":907,"target":{"id":550},"position":"-720,250 -720,220 -410,220 -410,240","sourceConnector":"top","targetConnector":"top"}],"id":720,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"-840,250","title":"Clear Route Layer"},{"inputs":{},"transitions":[{"inputs":{},"id":905,"target":{"id":720},"position":"-720,370 -720,280","sourceConnector":"top","targetConnector":"bottom"}],"id":554,"action":"gcx:wf:core::Container","position":"-840,370","title":"Open SR"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.geometryServiceUrl","source":"$wfInputs.json.geometryServiceUrl"},"geometry":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result[0].geometry","source":"$selectedSRs.result[0].geometry"},"outSpatialReference":4326},"transitions":[{"inputs":{},"id":946,"target":{"id":554},"position":"-760,600 -760,480 -720,480 -720,460","sourceConnector":"top","targetConnector":"bottom"}],"id":945,"action":"gcx:wf:arcgis::ProjectServiceTask","position":"-880,600","title":"Project Geometry","name":"projectGeometry2"}],"id":2},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":699,"target":{"id":594},"position":"-80,-90 -80,-40 170,-40 170,-20","sourceConnector":"bottom","targetConnector":"top"}],"id":559,"purpose":"start","title":"Container","position":"-170,-150"},{"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":590}}},"id":594,"action":"gcx:wf:forms:form:DisplayForm","position":"50,-20","title":"Open Service Request","name":"openServiceRequestForm"}],"id":557},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":912,"target":{"id":911},"position":"90,60 90,180 100,180 100,200","sourceConnector":"bottom","targetConnector":"top"}],"id":572,"purpose":"start","title":"Event","position":"0,0"},{"inputs":{},"transitions":[{"inputs":{},"id":919,"target":{"id":917},"position":"100,260 100,310","sourceConnector":"bottom","targetConnector":"top"}],"id":911,"action":"gcx:wf:arcgis::GetMap","position":"-20,200","title":"Get Map","name":"getMap"},{"inputs":{"expression":{"accessors":["$getMap"],"annotations":[{"kind":"idref","index":0,"count":7}],"code":"$getMap.map.map.itemId","source":"$getMap.map.map.itemId"}},"transitions":[{"inputs":{},"id":923,"target":{"id":922},"position":"100,370 100,400","sourceConnector":"bottom","targetConnector":"top"}],"id":917,"action":"gcx:wf:core::Evaluate","position":"-20,310","title":"Evaluate Expression","name":"evaluate10"},{"inputs":{"message":{"accessors":["$evaluate10"],"annotations":[{"kind":"idref","index":0,"count":11}],"code":"$evaluate10.result","source":"$evaluate10.result"}},"transitions":[{"inputs":{},"id":924,"target":{"id":578},"position":"100,430 100,520 110,520 110,540","sourceConnector":"bottom","targetConnector":"top"}],"id":922,"action":"gcx:wf:core::Log","position":"-20,400","title":"Log"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"propertyName":"description","propertyValue":{"accessors":["$wfInputs","$getSelectedRequestId","$cachedToken1","$getSelectedRequestId","$evaluate10","$projectGeometry2","$projectGeometry2"],"annotations":[{"kind":"idref","index":16,"count":9},{"kind":"idref","index":91,"count":21},{"kind":"idref","index":129,"count":13},{"kind":"idref","index":178,"count":21},{"kind":"idref","index":283,"count":11},{"kind":"idref","index":312,"count":17},{"kind":"idref","index":344,"count":17}],"code":"\"[Click here](\" + $wfInputs.json.cityworksAppUrl + \"WorkManagement/RequestEdit.aspx?RequestId=\" + $getSelectedRequestId.result + \"&token=\" + $cachedToken1.value + \") to view Service Request #\" + $getSelectedRequestId.result + \" in Cityworks.\\n\\n [Open Collector for ArcGIS](arcgis-collector://?itemID=\" + $evaluate10.result + \"&center=\" + $projectGeometry2.geometry.y + \",\" + $projectGeometry2.geometry.x + \")\"","source":"`[Click here](${$wfInputs.json.cityworksAppUrl}WorkManagement/RequestEdit.aspx?RequestId=${$getSelectedRequestId.result}&token=${$cachedToken1.value}) to view Service Request #${$getSelectedRequestId.result} in Cityworks.\\n\\n [Open Collector for ArcGIS](arcgis-collector://?itemID=${$evaluate10.result}&center=${$projectGeometry2.geometry.y},${$projectGeometry2.geometry.x})` "}},"id":578,"action":"gcx:wf:forms::SetFormElementProperty","position":"-10,540","title":"Set Form Element Property"}],"id":568,"title":"load-text1"},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":642,"target":{"id":640},"position":"90,60 90,100 120,100 120,120","sourceConnector":"bottom","targetConnector":"top"}],"id":473,"purpose":"start","title":"Event","position":"0,0"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]}},"transitions":[{"inputs":{},"id":648,"target":{"id":490},"position":"120,180 120,200 100,200 100,220","sourceConnector":"bottom","targetConnector":"top"}],"id":640,"action":"gcx:wf:forms::GetFormEventData","position":"0,120","title":"Get Form Event Data","name":"getSRFormEvent"},{"inputs":{"value":{"accessors":["$getSRFormEvent"],"annotations":[{"kind":"idref","index":0,"count":15}],"code":"$getSRFormEvent.value","source":"$getSRFormEvent.value"}},"transitions":[{"inputs":{},"id":836,"target":{"id":656},"branch":"end","position":"100,280 100,530 290,530 290,550","sourceConnector":"bottom","targetConnector":"top"},{"inputs":{},"id":878,"target":{"id":875},"branch":"route","position":"160,220 160,200 420,200 420,-25 440,-25","sourceConnector":"top-right","targetConnector":"left"},{"inputs":{},"id":525,"target":{"id":494},"branch":"start","position":"-20,250 -290,250 -290,280","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":677,"target":{"id":676},"position":"220,250 440,250 440,70 580,70 580,90","purpose":"default","sourceConnector":"right","targetConnector":"top","title":"submit"}],"id":490,"action":"gcx:wf:core::Switch","position":"-20,220","title":"Switch"},{"inputs":{"key":"StartTime"},"transitions":[{"inputs":{},"id":771,"target":{"id":664},"position":"290,610 290,660","sourceConnector":"bottom"}],"id":656,"action":"gcx:wf:app::GetApplicationData","position":"170,550","title":"Get Cached Start Date","name":"getCachedStartDate1"},{"inputs":{"condition":{"accessors":["$getCachedStartDate1"],"annotations":[{"kind":"idref","index":0,"count":20}],"code":"$getCachedStartDate1.value > 0","source":"$getCachedStartDate1.value > 0"}},"transitions":[{"inputs":{},"id":789,"target":{"id":687},"branch":"false","position":"350,690 700,690 700,660 720,660","sourceConnector":"right","targetConnector":"left"},{"inputs":{},"id":774,"target":{"id":685},"branch":"true","position":"230,690 -20,690 -20,740","sourceConnector":"left","targetConnector":"top"}],"id":664,"action":"gcx:wf:core::If","position":"230,660","title":"If Start Date"},{"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":644}},"reset":true},"transitions":[{"inputs":{},"id":792,"target":{"id":693},"position":"840,600 840,550 670,550 670,530","sourceConnector":"top","targetConnector":"bottom"}],"id":687,"action":"gcx:wf:forms:form:DisplayForm","position":"720,600","title":"Get Start Date","name":"getStartDateForm1"},{"inputs":{"value":{"accessors":["$getStartDateForm1"],"annotations":[{"kind":"idref","index":0,"count":18}],"code":"$getStartDateForm1.result","source":"$getStartDateForm1.result"}},"transitions":[{"inputs":{},"id":797,"target":{"id":696},"position":"790,500 950,500 950,540 1030,540 1030,520","purpose":"default","sourceConnector":"right","targetConnector":"bottom","title":"Default"}],"id":693,"action":"gcx:wf:core::Switch","position":"550,470","title":""},{"inputs":{"condition":{"accessors":["$getStartDateForm1","$getStartDateForm1"],"annotations":[{"kind":"idref","index":7,"count":18},{"kind":"idref","index":83,"count":18}],"code":"typeof ($getStartDateForm1.state.startDateTimePicker.value.value) != \"undefined\" && $getStartDateForm1.state.startDateTimePicker.value.value > 1000","source":"typeof($getStartDateForm1.state.startDateTimePicker.value.value) != \"undefined\" && $getStartDateForm1.state.startDateTimePicker.value.value > 1000"}},"transitions":[{"inputs":{},"id":804,"target":{"id":698},"branch":"true","position":"970,490 950,490 950,340 970,340 970,305 950,305","sourceConnector":"left","targetConnector":"right"}],"id":696,"action":"gcx:wf:core::If","position":"970,460","title":"If"},{"inputs":{"key":"StartTime","value":{"accessors":["$getStartDateForm1"],"annotations":[{"kind":"idref","index":0,"count":18}],"code":"$getStartDateForm1.state.startDateTimePicker.value.value","source":"$getStartDateForm1.state.startDateTimePicker.value.value"}},"transitions":[{"inputs":{},"id":810,"target":{"id":656},"position":"710,305 440,305 440,580 410,580","sourceConnector":"left","targetConnector":"right"}],"id":698,"action":"gcx:wf:app::SetApplicationData","position":"710,290","title":"Cache Start Time"},{"inputs":{"expression":{"accessors":["Date"],"annotations":[{"kind":"idref","index":0,"count":4}],"code":"Date.now()","source":"Date.now()"}},"transitions":[{"inputs":{},"id":817,"target":{"id":701},"position":"100,785 460,785 460,780 600,780 600,800","sourceConnector":"right","targetConnector":"top"}],"id":685,"action":"gcx:wf:core::Evaluate","description":"Get Date/Time in ms","position":"-140,740","title":"Get Date/Time","name":"getEndDate1"},{"inputs":{"date":{"accessors":["$getCachedStartDate1"],"annotations":[{"kind":"idref","index":0,"count":20}],"code":"$getCachedStartDate1.value","source":"$getCachedStartDate1.value"},"format":"LLL"},"transitions":[{"inputs":{},"id":819,"target":{"id":652},"position":"600,860 600,880 820,880 820,870 960,870 960,890","sourceConnector":"bottom","targetConnector":"top"}],"id":701,"action":"gcx:wf:core::FormatDate","position":"480,800","title":"Format Start Date","name":"startDate2"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"propertyName":"title","elementName":{"accessors":["$openServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":23}],"code":"$openServiceRequestForm.state.startTimeText","source":"$openServiceRequestForm.state.startTimeText"}},"transitions":[{"inputs":{},"id":654,"target":{"id":704},"position":"960,920 960,940 770,940 770,890 630,890 630,910","sourceConnector":"bottom","targetConnector":"top"}],"id":652,"action":"gcx:wf:forms::SetFormElementProperty","position":"840,890","title":"Set Form Element Property"},{"inputs":{"date":{"accessors":["$getEndDate1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$getEndDate1.result","source":"$getEndDate1.result"},"format":"LLL"},"transitions":[{"inputs":{},"id":821,"target":{"id":714},"position":"510,940 440,940 440,850 420,850","sourceConnector":"left","targetConnector":"right"}],"id":704,"action":"gcx:wf:core::FormatDate","position":"510,910","title":"Format End Date","name":"endDate1"},{"inputs":{"expression":{"accessors":["$getEndDate1","$getCachedStartDate1"],"annotations":[{"kind":"idref","index":3,"count":12},{"kind":"idref","index":25,"count":20}],"code":"((($getEndDate1.result - $getCachedStartDate1.value) / 1000) / 60) / 60","source":"((($getEndDate1.result - $getCachedStartDate1.value) / 1000) / 60) / 60"}},"transitions":[{"inputs":{},"id":823,"target":{"id":734},"position":"300,880 300,950 290,950 290,970","sourceConnector":"bottom","targetConnector":"top"}],"id":714,"action":"gcx:wf:core::Evaluate","position":"180,820","title":"Calculate Labor Hours","name":"calculateLaborHours1"},{"inputs":{"text":{"accessors":["$calculateLaborHours1","$selectedSRs"],"annotations":[{"kind":"idref","index":3,"count":21},{"kind":"idref","index":73,"count":12}],"code":"$calculateLaborHours1.result + \" Labor Hours will be added to Request #\" + $selectedSRs.result.map(function (a) { return a.attributes[\"RequestId\"]; })","source":"`${$calculateLaborHours1.result} Labor Hours will be added to Request #${$selectedSRs.result.map(a => a.attributes[\"RequestId\"])}` "}},"transitions":[{"inputs":{},"id":825,"target":{"id":739},"position":"290,1070 290,1090 490,1090 490,1010 630,1010 630,1030","sourceConnector":"bottom","targetConnector":"top"}],"id":734,"action":"gcx:wf:ui::Alert","description":"Inform user of how many labor hours will be added to Service Request","position":"170,970","title":"Labor Hours Alert"},{"inputs":{"object":{"accessors":["$calculateLaborHours1","$getSelectedRequestId","$getApplicationData1","$startDate2","$endDate1"],"annotations":[{"kind":"idref","index":10,"count":21},{"kind":"idref","index":52,"count":21},{"kind":"idref","index":99,"count":20},{"kind":"idref","index":187,"count":11},{"kind":"idref","index":217,"count":9}],"code":"{\n    Hours: $calculateLaborHours1.result,\n    RequestId: $getSelectedRequestId.result,\n    EmployeeSids: [$getApplicationData1.value.Value.EmployeeSid],\n    EmployeeRegular: true,\n    StartDate: $startDate2.iso,\n    FinishDate: $endDate1.iso\n}","source":"{\n  Hours:$calculateLaborHours1.result,\n  RequestId:$getSelectedRequestId.result, \n  EmployeeSids:[$getApplicationData1.value.Value.EmployeeSid], \n  EmployeeRegular: true,   \n  StartDate:$startDate2.iso,\n  FinishDate:$endDate1.iso\n}"}},"transitions":[{"inputs":{},"id":827,"target":{"id":743},"position":"630,1090 630,1120 290,1120 290,1140","sourceConnector":"bottom","targetConnector":"top"}],"id":739,"action":"gcx:wf:core::ConvertToJson","position":"510,1030","title":"Create SR Labor Cost JSON","description":"","name":"serviceRequestLaborCostsJson1"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken1","$serviceRequestLaborCostsJson1"],"annotations":[{"kind":"idref","index":11,"count":9},{"kind":"idref","index":41,"count":9},{"kind":"idref","index":97,"count":13},{"kind":"idref","index":133,"count":30}],"code":"{\n    url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.addRequestLaborCosts + \"?token=\" + $cachedToken1.value,\n    data: \"data=\" + $serviceRequestLaborCostsJson1.json,\n    type: \"POST\"\n}","source":" {\n\t\n\turl: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.addRequestLaborCosts + \"?token=\" + $cachedToken1.value,\n\tdata:\"data=\" +$serviceRequestLaborCostsJson1.json,\n        type:\"POST\"\n}"}},"transitions":[{"inputs":{},"id":829,"target":{"id":751},"position":"290,1200 290,1220 80,1220 80,1190 0,1190 0,1210","sourceConnector":"bottom","targetConnector":"top"}],"id":743,"action":"gcx:wf:core::RunWorkflow","position":"170,1140","title":"Add Labor Costs","description":"","name":"addServiceRequestLaborCosts1"},{"inputs":{"condition":{"accessors":["$addServiceRequestLaborCosts1","$addServiceRequestLaborCosts1","$addServiceRequestLaborCosts1"],"annotations":[{"kind":"idref","index":7,"count":29},{"kind":"idref","index":70,"count":29},{"kind":"idref","index":136,"count":29}],"code":"typeof ($addServiceRequestLaborCosts1.result) != \"undefined\" && typeof ($addServiceRequestLaborCosts1.result.response) != \"undefined\" && $addServiceRequestLaborCosts1.result.response.success == true","source":"typeof($addServiceRequestLaborCosts1.result) != \"undefined\" && typeof($addServiceRequestLaborCosts1.result.response) != \"undefined\" &&  $addServiceRequestLaborCosts1.result.response.success == true"}},"transitions":[{"inputs":{},"id":833,"target":{"id":762},"branch":"false","position":"60,1240 80,1240 80,1390 10,1390 10,1410","sourceConnector":"right","targetConnector":"top"},{"inputs":{},"id":831,"target":{"id":767},"branch":"true","position":"-60,1240 -290,1240 -290,1440","sourceConnector":"left","targetConnector":"top"}],"id":751,"action":"gcx:wf:core::If","position":"-60,1210","title":"If"},{"inputs":{"text":{"accessors":["$getSelectedRequestId","$addServiceRequestLaborCosts1"],"annotations":[{"kind":"idref","index":28,"count":21},{"kind":"idref","index":71,"count":29}],"code":"\"Labor costs not added to \" + $getSelectedRequestId.result + \". Response: \" + $addServiceRequestLaborCosts1.result","source":"`Labor costs not added to ${$getSelectedRequestId.result}. Response: ${$addServiceRequestLaborCosts1.result}`"}},"transitions":[{"inputs":{},"id":835,"target":{"id":767},"position":"10,1440 10,1490 -290,1490 -290,1470","sourceConnector":"bottom","targetConnector":"bottom"}],"id":762,"action":"gcx:wf:ui::Alert","position":"-110,1410","title":"LaborCost not added error"},{"inputs":{"key":"StartTime","value":{"accessors":[],"code":"\"undefined\"","source":"\"undefined\""}},"id":767,"action":"gcx:wf:app::SetApplicationData","position":"-410,1440","title":"Clear Cached Start Time"},{"inputs":{},"id":875,"action":"gcx:wf:core::Container","position":"440,-70","title":"Route to SR"},{"inputs":{"expression":{"accessors":["Date"],"annotations":[{"kind":"idref","index":0,"count":4}],"code":"Date.now()","source":"Date.now()"}},"transitions":[{"inputs":{},"id":536,"target":{"id":513},"position":"-290,370 -290,450","sourceConnector":"bottom","targetConnector":"top"}],"id":494,"action":"gcx:wf:core::Evaluate","description":"Get Date/Time in ms","position":"-410,280","title":"Get Date/Time","name":"getStartDate1"},{"inputs":{"key":"StartTime","value":{"accessors":["$getStartDate1"],"annotations":[{"kind":"idref","index":0,"count":14}],"code":"$getStartDate1.result","source":"$getStartDate1.result"}},"transitions":[{"inputs":{},"id":598,"target":{"id":660},"position":"-290,480 -290,530","sourceConnector":"bottom","targetConnector":"top"}],"id":513,"action":"gcx:wf:app::SetApplicationData","position":"-410,450","title":"Cache Start Time"},{"inputs":{"date":{"accessors":["$getStartDate1"],"annotations":[{"kind":"idref","index":0,"count":14}],"code":"$getStartDate1.result","source":"$getStartDate1.result"},"format":"LLL"},"transitions":[{"inputs":{},"id":671,"target":{"id":668},"position":"-290,590 -290,620 -300,620 -300,640","sourceConnector":"bottom","targetConnector":"top"}],"id":660,"action":"gcx:wf:core::FormatDate","position":"-410,530","title":"Format Start Date","name":"startDate1"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"elementName":{"accessors":["$openServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":23}],"code":"$openServiceRequestForm.state.startTimeText","source":"$openServiceRequestForm.state.startTimeText"},"visible":true},"transitions":[{"inputs":{},"id":672,"target":{"id":498},"position":"-300,670 -300,760","sourceConnector":"bottom","targetConnector":"top"}],"id":668,"action":"gcx:wf:forms::ShowFormElement","position":"-420,640","title":"Show Form Element"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"propertyName":"title","propertyValue":{"accessors":["$startDate1"],"annotations":[{"kind":"idref","index":15,"count":11}],"code":"\"Start Time: \" + $startDate1.formatted","source":"`Start Time: ${$startDate1.formatted}`"},"elementName":{"accessors":["$openServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":23}],"code":"$openServiceRequestForm.state.startTimeText","source":"$openServiceRequestForm.state.startTimeText"}},"id":498,"action":"gcx:wf:forms::SetFormElementProperty","position":"-420,760","title":"Set Form Element Property"},{"inputs":{"expression":{"accessors":["$openServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":23}],"code":"$openServiceRequestForm.result = 'submit'","source":"$openServiceRequestForm.result= 'submit'"}},"transitions":[{"inputs":{},"id":678,"target":{"id":673},"position":"580,150 580,210","sourceConnector":"bottom","targetConnector":"top"}],"id":676,"action":"gcx:wf:core::Evaluate","position":"460,90","title":"Evaluate Expression","name":"evaluate7"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]}},"id":673,"action":"gcx:wf:forms::PropagateFormEvent","position":"460,210","title":"Propagate Form Event"}],"id":472,"title":"click-footer"},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":859,"target":{"id":843},"position":"90,60 90,80 280,80 280,70 420,70 420,90","sourceConnector":"bottom","targetConnector":"top"}],"id":841,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{},"transitions":[{"inputs":{},"id":861,"target":{"id":845},"position":"420,200 420,220 260,220 260,100 120,100 120,120","sourceConnector":"bottom","targetConnector":"top"}],"id":843,"action":"gcx:wf:arcgis::CreateFeatureSet","description":"Feature Set of current location Feature and SR Feature","position":"300,90","title":"Routing Feature Set","name":"featureSetRouting1"},{"inputs":{"collection":{"accessors":["$featureSetRouting1"],"annotations":[{"kind":"idref","index":0,"count":19}],"code":"$featureSetRouting1.featureSet.features","source":"$featureSetRouting1.featureSet.features"},"item":{"accessors":["$feature1"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$feature1.feature","source":"$feature1.feature"}},"transitions":[{"inputs":{},"id":863,"target":{"id":847},"position":"120,200 120,250","sourceConnector":"bottom","targetConnector":"top"}],"id":845,"action":"gcx:wf:core::AddItem","position":"0,120","title":"Add Item","description":"Add Current Location Feature to Feature Set"},{"inputs":{"collection":{"accessors":["$featureSetRouting1"],"annotations":[{"kind":"idref","index":0,"count":19}],"code":"$featureSetRouting1.featureSet.features","source":"$featureSetRouting1.featureSet.features"},"item":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result[0]","source":"$selectedSRs.result[0]"}},"transitions":[{"inputs":{},"id":865,"target":{"id":849},"position":"240,290 260,290 260,240 400,240 400,260","sourceConnector":"right","targetConnector":"top"}],"id":847,"action":"gcx:wf:core::AddItem","position":"0,250","title":"Add Item","description":"Add Selected SR Feature to Feature Set"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.routeServiceUrl","source":"$wfInputs.json.routeServiceUrl"},"stops":{"accessors":["$featureSetRouting1"],"annotations":[{"kind":"idref","index":0,"count":19}],"code":"$featureSetRouting1.featureSet","source":"$featureSetRouting1.featureSet"}},"transitions":[{"inputs":{},"id":867,"target":{"id":851},"position":"400,320 400,440","sourceConnector":"bottom","targetConnector":"top"}],"id":849,"action":"gcx:wf:arcgis::RouteTask","position":"280,260","title":"Route to SR","name":"routeToSR1"},{"inputs":{"json":"{\n   \"type\": \"esriSLS\",\n   \"style\": \"esriSLSDot\",\n   \"color\": [255,0,0],\n   \"width\": 6\n}"},"transitions":[{"inputs":{},"id":869,"target":{"id":853},"position":"400,500 400,520 230,520 230,430 90,430 90,450","sourceConnector":"bottom","targetConnector":"top"}],"id":851,"action":"gcx:wf:arcgis::SymbolFromJson","position":"280,440","title":"Get Symbol From JSON","name":"symbol4"},{"inputs":{"attributes":{"accessors":["$routeToSR1"],"annotations":[{"kind":"idref","index":0,"count":11}],"code":"$routeToSR1.routeResults[0].route.attributes","source":"$routeToSR1.routeResults[0].route.attributes"},"geometry":{"accessors":["$routeToSR1"],"annotations":[{"kind":"idref","index":0,"count":11}],"code":"$routeToSR1.routeResults[0].route.geometry","source":"$routeToSR1.routeResults[0].route.geometry"},"symbol":{"accessors":["$symbol4"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$symbol4.symbol","source":"$symbol4.symbol"}},"transitions":[{"inputs":{},"id":871,"target":{"id":855},"position":"90,510 90,580 100,580 100,600","sourceConnector":"bottom","targetConnector":"top"}],"id":853,"action":"gcx:wf:arcgis::CreateGraphic","position":"-30,450","title":"Create Feature","name":"feature4"},{"inputs":{"layerId":"lyr_Route","features":{"accessors":["$feature4"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$feature4.feature","source":"$feature4.feature"},"removeAllFeatures":true},"transitions":[{"inputs":{},"id":910,"target":{"id":909},"position":"100,660 100,710","sourceConnector":"bottom","targetConnector":"top"}],"id":855,"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","position":"-20,600","title":"Add Graphics Layer Features","name":"addRouteGraphic1"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"elementName":"routeDirectionsTextArea","elementType":"Text","element":"{description: \"This is the description\",visible:true}"},"id":909,"action":"gcx:wf:forms::AddFormElement","position":"-20,710","title":"Add Form Element","name":"showRouteDirections"}],"id":839},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":628,"target":{"id":624},"position":"90,60 90,160 120,160 120,180","sourceConnector":"bottom","targetConnector":"top"}],"id":556,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"object":{"accessors":["$getSelectedRequestId"],"annotations":[{"kind":"idref","index":14,"count":21}],"code":"{\n    RequestId: $getSelectedRequestId.result,\n    Status: \"COMP\"\n}","source":"{\n  RequestId:$getSelectedRequestId.result, \n  Status:\"COMP\"\n}"}},"transitions":[{"inputs":{},"id":632,"target":{"id":588},"position":"120,240 120,290 20,290 20,310","sourceConnector":"bottom","targetConnector":"top"}],"id":624,"action":"gcx:wf:core::ConvertToJson","position":"0,180","title":"Create SR Update JSON","description":"","name":"updateServiceRequestJson"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken1","$updateServiceRequestJson"],"annotations":[{"kind":"idref","index":11,"count":9},{"kind":"idref","index":41,"count":9},{"kind":"idref","index":98,"count":13},{"kind":"idref","index":134,"count":25}],"code":"{\n    url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.updateServiceRequests + \"?token=\" + $cachedToken1.value,\n    data: \"data=\" + $updateServiceRequestJson.json,\n    type: \"POST\"\n}","source":" {\n\t\n\turl: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.updateServiceRequests + \"?token=\" + $cachedToken1.value,\n\tdata:\"data=\" +$updateServiceRequestJson.json,\n        type:\"POST\"\n}"}},"id":588,"action":"gcx:wf:core::RunWorkflow","position":"-100,310","title":"Update SR Status to Completed","description":"","name":"updateServiceRequest"}],"id":552},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":897,"target":{"id":893},"position":"90,60 90,160 120,160 120,180","sourceConnector":"bottom","targetConnector":"top"}],"id":891,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"object":{"accessors":["$getSelectedRequestId"],"annotations":[{"kind":"idref","index":16,"count":21}],"code":"{\n    RequestIds: [$getSelectedRequestId.result]\n}","source":"{\n  RequestIds:[$getSelectedRequestId.result]\n}"}},"transitions":[{"inputs":{},"id":899,"target":{"id":895},"position":"120,240 120,290 20,290 20,310","sourceConnector":"bottom","targetConnector":"top"}],"id":893,"action":"gcx:wf:core::ConvertToJson","position":"0,180","title":"Create SR Update JSON","description":"","name":"cancelServiceRequestJson"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken1","$cancelServiceRequestJson"],"annotations":[{"kind":"idref","index":11,"count":9},{"kind":"idref","index":41,"count":9},{"kind":"idref","index":98,"count":13},{"kind":"idref","index":134,"count":25}],"code":"{\n    url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.cancelServiceRequests + \"?token=\" + $cachedToken1.value,\n    data: \"data=\" + $cancelServiceRequestJson.json,\n    type: \"POST\"\n}","source":" {\n\t\n\turl: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.cancelServiceRequests + \"?token=\" + $cachedToken1.value,\n\tdata:\"data=\" +$cancelServiceRequestJson.json,\n        type:\"POST\"\n}"}},"id":895,"action":"gcx:wf:core::RunWorkflow","position":"-100,310","title":"Update SR Status to Completed","description":"","name":"cancelServiceRequest"}],"id":889},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":561,"target":{"id":533},"position":"90,60 90,110"}],"id":531,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken1","$cityworksSRSearchJson"],"annotations":[{"kind":"idref","index":11,"count":9},{"kind":"idref","index":41,"count":9},{"kind":"idref","index":98,"count":13},{"kind":"idref","index":134,"count":22}],"code":"{\n    url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.searchServiceRequests + \"?token=\" + $cachedToken1.value,\n    data: \"data=\" + $cityworksSRSearchJson.json,\n    type: \"POST\"\n}","source":" {\n\t\n\turl: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.searchServiceRequests + \"?token=\" + $cachedToken1.value,\n\tdata:\"data=\" +$cityworksSRSearchJson.json,\n        type:\"POST\"\n}"}},"transitions":[{"inputs":{},"id":563,"target":{"id":535},"position":"90,220 90,320","targetConnector":"top"}],"id":533,"action":"gcx:wf:core::RunWorkflow","position":"-30,110","title":"Search Service Requests","description":"Search for open SRs within current map extent.","name":"serviceRequestSearchQuery"},{"inputs":{"object":{"accessors":["$serviceRequestSearchQuery"],"annotations":[{"kind":"idref","index":19,"count":26}],"code":"{\n    \"RequestIds\": $serviceRequestSearchQuery.result.response.responseJson.Value\n}","source":"{\n    \"RequestIds\":$serviceRequestSearchQuery.result.response.responseJson.Value\n}"}},"transitions":[{"inputs":{},"id":565,"target":{"id":537},"position":"90,430 90,500","sourceConnector":"bottom","targetConnector":"top"}],"id":535,"action":"gcx:wf:core::ConvertToJson","position":"-30,320","title":"Service Request JSON","description":"Create a JSON object containing a list of Service Request Ids","name":"serviceRequestIds"},{"inputs":{"condition":{"accessors":["$serviceRequestSearchQuery"],"annotations":[{"kind":"idref","index":0,"count":26}],"code":"$serviceRequestSearchQuery.result.response.responseJson.Value.length == 0","source":"$serviceRequestSearchQuery.result.response.responseJson.Value.length == 0"}},"transitions":[{"inputs":{},"id":567,"target":{"id":674},"branch":"false","position":"210,545 330,545 330,310","sourceConnector":"right","targetConnector":"bottom"},{"inputs":{},"id":569,"target":{"id":541},"branch":"true","position":"-30,545 -50,545 -50,630 70,630 70,650","targetConnector":"top"}],"id":537,"action":"gcx:wf:core::If","position":"-30,500","title":"If","description":"No open SRs in extent?"},{"inputs":{"layerId":"lyr_CurrentPosition_buffer_result"},"transitions":[{"inputs":{},"id":675,"target":{"id":539},"position":"330,280 330,90 420,90","sourceConnector":"top","targetConnector":"left"}],"id":674,"action":"gcx:wf:arcgis::ClearGraphicsLayer","position":"210,280","title":"Clear Graphics Layer"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken1","$serviceRequestIds"],"annotations":[{"kind":"idref","index":11,"count":9},{"kind":"idref","index":41,"count":9},{"kind":"idref","index":99,"count":13},{"kind":"idref","index":136,"count":18}],"code":"{\n    url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.getServiceRequestsById + \"?token=\" + $cachedToken1.value,\n    data: \"data=\" + $serviceRequestIds.json,\n    type: \"POST\"\n}","source":" {\n\t\n\turl: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.getServiceRequestsById + \"?token=\" + $cachedToken1.value,\n\tdata:\"data=\" + $serviceRequestIds.json,\n        type:\"POST\"\n}"}},"transitions":[{"inputs":{},"id":571,"target":{"id":543},"position":"540,120 540,140 800,140 800,130 940,130 940,150","sourceConnector":"bottom","targetConnector":"top"}],"id":539,"action":"gcx:wf:core::RunWorkflow","position":"420,60","title":"Get Service Requests by Id","name":"serviceRequests"},{"inputs":{},"transitions":[{"inputs":{},"id":681,"target":{"id":679},"position":"940,260 940,310 1040,310 1040,330","sourceConnector":"bottom","targetConnector":"top"}],"id":543,"action":"gcx:wf:arcgis::CreateFeatureSet","position":"820,150","title":"SR FeatureSet","description":"FeatureSet placeholder for SR features","name":"featureSet1"},{"inputs":{"expression":{"accessors":[],"annotations":[],"code":"[]","source":"[]"}},"transitions":[{"inputs":{},"id":689,"target":{"id":807},"position":"1040,390 1040,410 1250,410 1250,160 1390,160 1390,180","sourceConnector":"bottom","targetConnector":"top"}],"id":679,"action":"gcx:wf:core::CreateValue","position":"920,330","title":"Create Value","name":"srPoints"},{"inputs":{"items":{"accessors":["$serviceRequests"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$serviceRequests.result.response.responseJson.Value","source":"$serviceRequests.result.response.responseJson.Value"}},"transitions":[{"inputs":{},"id":776,"target":{"id":688},"position":"1390,360 1390,420 1280,420 1280,440","sourceConnector":"bottom","targetConnector":"top"}],"id":807,"action":"gcx:wf:core:loop:ForEach","position":"1270,180","title":"For Each","description":"Loop through the Service Requests and create a feature for each","name":"serviceRequestGraphicsLoop1"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.geometryServiceUrl","source":"$wfInputs.json.geometryServiceUrl"},"geometry":{"accessors":["$srPoints"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$srPoints.result","source":"$srPoints.result"},"outSpatialReference":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.mapSpatialReference","source":"$wfInputs.json.mapSpatialReference"}},"transitions":[{"inputs":{},"id":779,"target":{"id":545},"position":"1280,530 1280,580 1240,580 1240,600","sourceConnector":"bottom","targetConnector":"top"}],"id":688,"action":"gcx:wf:arcgis::ProjectServiceTask","position":"1160,440","title":"Project Geometry","description":"Project the Point to the map's SR","name":"projectSRPoints"},{"inputs":{"items":{"accessors":["$serviceRequests"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$serviceRequests.result.response.responseJson.Value","source":"$serviceRequests.result.response.responseJson.Value"}},"transitions":[{"inputs":{},"id":814,"target":{"id":813},"position":"1240,780 1240,800 910,800 910,720","sourceConnector":"bottom","targetConnector":"bottom"}],"id":545,"action":"gcx:wf:core:loop:ForEach","position":"1120,600","title":"For Each","description":"Loop through the Service Requests and create a feature for each","name":"serviceRequestGraphicsLoop"},{"inputs":{"layerId":"lyr_ServiceRequests","features":{"accessors":["$featureSet1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$featureSet1.featureSet.features","source":"$featureSet1.featureSet.features"}},"transitions":[{"inputs":{},"id":815,"target":{"id":758},"position":"910,660 910,560 1000,560 1000,510 980,510","sourceConnector":"top","targetConnector":"right"}],"id":813,"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","position":"790,660","title":"Add Graphics Layer Features","name":"addGraphicsLayerFeatures3"},{"inputs":{"features":{"accessors":["$featureSet1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$featureSet1.featureSet","source":"$featureSet1.featureSet"},"sortAttribute":"_DISTANCE"},"transitions":[{"inputs":{},"id":759,"target":{"id":547},"position":"860,540 860,560 680,560 680,530 540,530 540,550","sourceConnector":"bottom","targetConnector":"top"}],"id":758,"action":"gcx:wf:arcgis::SortFeatureSet","position":"740,480","title":"Sort Feature Set by Distance","name":"sortFeatureSet1"},{"inputs":{"features":{"accessors":["$featureSet1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$featureSet1.featureSet","source":"$featureSet1.featureSet"}},"transitions":[{"inputs":{},"id":577,"target":{"id":549},"position":"540,610 540,650"}],"id":547,"action":"gcx:wf:arcgis::GetFeatureSetExtent","position":"420,550","title":"Get Feature Set Extent","name":"getFeatureSetExtent2"},{"inputs":{"geometry":{"accessors":["$getFeatureSetExtent2"],"annotations":[{"kind":"idref","index":0,"count":21}],"code":"$getFeatureSetExtent2.extent","source":"$getFeatureSetExtent2.extent"}},"transitions":[{"inputs":{},"id":517,"target":{"id":551},"position":"540,710 540,810","sourceConnector":"bottom","targetConnector":"top"}],"id":549,"action":"gcx:wf:arcgis::SetViewExtent","position":"420,650","title":"Set Map Extent","name":"setMapExtent3"},{"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":659}}},"transitions":[{"inputs":{},"id":581,"target":{"id":591},"position":"660,890 960,890 960,970","targetConnector":"top"}],"id":551,"action":"gcx:wf:forms:form:DisplayForm","position":"420,810","title":"Select Service Requests","description":"Present the user with a pick list of SRs","name":"selectServiceRequestForm"},{"inputs":{"expression":{"accessors":[],"annotations":[],"code":"[]","source":"[]"}},"transitions":[{"inputs":{},"id":614,"target":{"id":608},"position":"960,1030 960,1090","sourceConnector":"bottom","targetConnector":"top"}],"id":591,"action":"gcx:wf:core::CreateValue","position":"840,970","title":"Create Value","name":"selectedSRs"},{"inputs":{"items":{"accessors":["$selectServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":25}],"code":"$selectServiceRequestForm.state.serviceRequestItems.value.items","source":"$selectServiceRequestForm.state.serviceRequestItems.value.items"}},"transitions":[{"inputs":{},"id":616,"target":{"id":553},"position":"960,1210 960,1230 670,1230 670,1030 530,1030 530,1050","sourceConnector":"bottom","targetConnector":"top"}],"id":608,"action":"gcx:wf:core:loop:ForEach","position":"840,1090","title":"For Each","name":"forEach2"},{"inputs":{"expression":{"accessors":["$formNav","$selectServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":8},{"kind":"idref","index":18,"count":25}],"code":"$formNav.result = $selectServiceRequestForm.result","source":"$formNav.result = $selectServiceRequestForm.result"}},"id":553,"action":"gcx:wf:core::Evaluate","position":"410,1050","title":"Form Nav","name":"evaluate9"},{"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":657}}},"transitions":[{"inputs":{},"id":583,"target":{"id":555},"position":"70,810 70,860"}],"id":541,"action":"gcx:wf:forms:form:DisplayForm","position":"-50,650","title":"No SRs Found","description":"Inform user that no SRs were found.","name":"noSRsForm"},{"inputs":{"expression":{"accessors":["$formNav","$noSRsForm"],"annotations":[{"kind":"idref","index":0,"count":8},{"kind":"idref","index":18,"count":10}],"code":"$formNav.result = $noSRsForm.result","source":"$formNav.result = $noSRsForm.result"}},"id":555,"action":"gcx:wf:core::Evaluate","position":"-50,860","title":"Form Nav","name":"evaluate8"}],"id":529},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":605,"target":{"id":603},"position":"90,60 90,110"}],"id":600,"purpose":"start","title":"For Each","position":"0,0"},{"inputs":{"collection":{"accessors":["$selectedSRs"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$selectedSRs.result","source":"$selectedSRs.result"},"item":{"accessors":["$forEach2"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$forEach2.item.value.data","source":"$forEach2.item.value.data"}},"id":603,"action":"gcx:wf:core::AddItem","position":"-30,110","title":"Add Item"}],"id":596},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":625,"target":{"id":617},"position":"110,-20 110,20","sourceConnector":"bottom"}],"id":615,"purpose":"start","title":"Event","position":"20,-80"},{"inputs":{"features":{"accessors":["$sortFeatureSet1"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$sortFeatureSet1.features","source":"$sortFeatureSet1.features"},"labelFieldName":"**Request Id: {RequestId}**\\\nDescription: {Description}"},"transitions":[{"inputs":{},"id":627,"target":{"id":619},"position":"110,140 110,200"}],"id":617,"action":"gcx:wf:forms::GetFormElementItemsFromFeatures","description":"Convert the features into form element items to be used in the element.","position":"-10,20","title":"Get Form Element Items From Features","name":"formElementItems2"},{"inputs":{"items":{"accessors":["$formElementItems2"],"annotations":[{"kind":"idref","index":0,"count":18}],"code":"$formElementItems2.items","source":"$formElementItems2.items"},"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"reset":true},"transitions":[{"inputs":{},"id":629,"target":{"id":621},"position":"110,280 110,380"}],"id":619,"action":"gcx:wf:forms::SetFormElementItems","description":"Assign form element items to the element.","position":"-10,200","title":"Set Form Element Items"},{"inputs":{"condition":{"accessors":["$featureSet1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$featureSet1.featureSet.features.length > 0","source":"$featureSet1.featureSet.features.length > 0"}},"transitions":[{"inputs":{},"id":631,"target":{"id":623},"branch":"true","position":"50,410 30,410 30,490 110,490 110,510","sourceConnector":"left","targetConnector":"top"}],"id":621,"action":"gcx:wf:core::If","position":"50,380","title":"If"},{"inputs":{"object":{"accessors":["$formElementItems2"],"annotations":[{"kind":"idref","index":0,"count":18}],"code":"$formElementItems2.items[0]","source":"$formElementItems2.items[0]"},"propertyName":"checked","propertyValue":true},"id":623,"action":"gcx:wf:core::SetProperty","position":"-10,510","title":"Set Property"}],"id":613,"title":"Blank-serviceRequestItems"},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":647,"target":{"id":637},"position":"110,70 110,120"}],"id":635,"purpose":"start","title":"Event","position":"20,10"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]}},"transitions":[{"inputs":{},"id":649,"target":{"id":639},"position":"110,180 110,230"}],"id":637,"action":"gcx:wf:forms::GetFormEventData","position":"-10,120","title":"Get Form Event Data","name":"getFormEventData1"},{"inputs":{"condition":{"accessors":["$getFormEventData1"],"annotations":[{"kind":"idref","index":7,"count":18}],"code":"typeof ($getFormEventData1.value) != \"undefined\"","source":"typeof($getFormEventData1.value) != \"undefined\""}},"transitions":[{"inputs":{},"id":651,"target":{"id":641},"branch":"true","position":"50,260 30,260 30,330 110,330 110,350","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":653,"target":{"id":643},"branch":"false","position":"170,260 300,255"}],"id":639,"action":"gcx:wf:core::If","position":"50,230","title":"If"},{"inputs":{"collection":{"accessors":["$getFormEventData1"],"annotations":[{"kind":"idref","index":0,"count":18}],"code":"$getFormEventData1.value.items","source":"$getFormEventData1.value.items"}},"transitions":[{"inputs":{},"id":655,"target":{"id":645},"position":"110,410 110,460"}],"id":641,"action":"gcx:wf:core::GetLastItem","position":"-10,350","title":"Get Last Item","name":"lastItem"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"elementName":{"accessors":["$selectServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":25}],"code":"$selectServiceRequestForm.state.textArea1","source":"$selectServiceRequestForm.state.textArea1"},"propertyName":"value","propertyValue":{"accessors":["$lastItem"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$lastItem.item.value.data.attributes[\"RequestId\"]","source":"$lastItem.item.value.data.attributes[\"RequestId\"]"}},"id":645,"action":"gcx:wf:forms::SetFormElementProperty","position":"-10,460","title":"Set Form Element Property"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"elementName":{"accessors":["$selectServiceRequestForm"],"annotations":[{"kind":"idref","index":0,"count":25}],"code":"$selectServiceRequestForm.state.textArea1","source":"$selectServiceRequestForm.state.textArea1"},"propertyName":"value","propertyValue":{"accessors":[],"code":"\"\"","source":"\"\""}},"id":643,"action":"gcx:wf:forms::SetFormElementProperty","position":"300,240","title":"Set Form Element Property"}],"id":633,"title":"change-serviceRequestItems"},{"steps":[{"inputs":{},"id":580,"purpose":"start","title":"Event","position":"0,0"}],"id":579,"title":"load-serviceRequestItems"},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":781,"target":{"id":595},"position":"80,-330 80,-270 30,-270 30,-250","sourceConnector":"bottom","targetConnector":"top"}],"id":587,"purpose":"start","title":"For Each","position":"-10,-390"},{"inputs":{"json":"{\n   \"url\":\"http://static.arcgis.com/images/Symbols/Animated/BlueStrobeMarkerSymbol.png\",   \n   \"type\": \"esriPMS\",\n   \"height\": 20,\n   \"width\": 20,\n   \"angle\": 0\n}"},"transitions":[{"inputs":{},"id":609,"target":{"id":597},"position":"30,-140 30,-90 -10,-90 -10,-70","sourceConnector":"bottom","targetConnector":"top"}],"id":595,"action":"gcx:wf:arcgis::SymbolFromJson","title":"Symbol From JSON","position":"-90,-250","description":"Create a SimpleMarkerSymbol object from JSON","name":"symbolfromjson1"},{"inputs":{"attributes":{"accessors":["$serviceRequestGraphicsLoop"],"annotations":[{"kind":"idref","index":0,"count":27}],"code":"$serviceRequestGraphicsLoop.item","source":"$serviceRequestGraphicsLoop.item"},"geometry":{"accessors":["$projectSRPoints","$serviceRequestGraphicsLoop"],"annotations":[{"kind":"idref","index":0,"count":16},{"kind":"idref","index":25,"count":27}],"code":"$projectSRPoints.results[$serviceRequestGraphicsLoop.pass]","source":"$projectSRPoints.results[$serviceRequestGraphicsLoop.pass]"},"symbol":{"accessors":["$symbolfromjson1"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$symbolfromjson1.symbol","source":"$symbolfromjson1.symbol"}},"transitions":[{"inputs":{},"id":782,"target":{"id":723},"position":"-10,-10 -10,50 10,50 10,70","sourceConnector":"bottom","targetConnector":"top"}],"id":597,"action":"gcx:wf:arcgis::CreateGraphic","position":"-130,-70","title":"Create SR Feature","name":"requestFeature"},{"inputs":{"geometry1":{"accessors":["$projectGeometry1"],"annotations":[{"kind":"idref","index":0,"count":17}],"code":"$projectGeometry1.geometry","source":"$projectGeometry1.geometry"},"geometry2":{"accessors":["$requestFeature"],"annotations":[{"kind":"idref","index":0,"count":15}],"code":"$requestFeature.feature.geometry","source":"$requestFeature.feature.geometry"},"unit":"feet"},"transitions":[{"inputs":{},"id":784,"target":{"id":724},"position":"10,130 10,160 410,160 410,180","sourceConnector":"bottom","targetConnector":"top"}],"id":723,"action":"gcx:wf:arcgis::DistanceEngineTask","position":"-110,70","title":"Calculate Distance","name":"distance1"},{"inputs":{"feature":{"accessors":["$requestFeature"],"annotations":[{"kind":"idref","index":0,"count":15}],"code":"$requestFeature.feature","source":"$requestFeature.feature"},"attributeName":"_DISTANCE","attributeValue":{"accessors":["$distance1"],"annotations":[{"kind":"idref","index":0,"count":10}],"code":"$distance1.distance","source":"$distance1.distance"}},"transitions":[{"inputs":{},"id":783,"target":{"id":599},"position":"410,210 410,350 -90,350 -90,370","sourceConnector":"bottom","targetConnector":"top"}],"id":724,"action":"gcx:wf:arcgis::SetFeatureAttribute","position":"290,180","title":"Set Feature Attribute"},{"inputs":{"collection":{"accessors":["$featureSet1"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$featureSet1.featureSet.features","source":"$featureSet1.featureSet.features"},"item":{"accessors":["$requestFeature"],"annotations":[{"kind":"idref","index":0,"count":15}],"code":"$requestFeature.feature","source":"$requestFeature.feature"}},"id":599,"action":"gcx:wf:core::AddItem","position":"-210,370","title":"Add Item","description":"Add feature to Feature Set"}],"id":585},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":788,"target":{"id":765},"position":"80,-330 80,-280"}],"id":763,"purpose":"start","title":"For Each","position":"-10,-390"},{"inputs":{"x":{"accessors":["$serviceRequestGraphicsLoop1"],"annotations":[{"kind":"idref","index":0,"count":28}],"code":"$serviceRequestGraphicsLoop1.item.SRX","source":"$serviceRequestGraphicsLoop1.item.SRX"},"y":{"accessors":["$serviceRequestGraphicsLoop1"],"annotations":[{"kind":"idref","index":0,"count":28}],"code":"$serviceRequestGraphicsLoop1.item.SRY","source":"$serviceRequestGraphicsLoop1.item.SRY"},"spatialReference":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.cityworksSpatialReference","source":"$wfInputs.json.cityworksSpatialReference"}},"transitions":[{"inputs":{},"id":775,"target":{"id":785},"position":"80,-220 80,-170 90,-170 90,-150","sourceConnector":"bottom","targetConnector":"top"}],"id":765,"action":"gcx:wf:arcgis::CreatePoint","position":"-40,-280","title":"Create Point","name":"requestLocation1"},{"inputs":{"collection":{"accessors":["$srPoints"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$srPoints.result","source":"$srPoints.result"},"item":{"accessors":["$requestLocation1"],"annotations":[{"kind":"idref","index":0,"count":17}],"code":"$requestLocation1.point","source":"$requestLocation1.point"}},"id":785,"action":"gcx:wf:core::AddItem","position":"-30,-150","title":"Add Item","description":"Add feature to Feature Set"}],"id":761},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":210,"target":{"id":523},"position":"180,30 660,30 660,150","targetConnector":"top"}],"id":200,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"geometry":{"accessors":["$point1"],"annotations":[{"kind":"idref","index":0,"count":7}],"code":"$point1.point","source":"$point1.point"},"unit":"miles","distance":1,"union":true,"geodesic":true},"transitions":[{"inputs":{},"id":564,"target":{"id":526},"position":"660,210 660,270","sourceConnector":"bottom","targetConnector":"top"}],"id":523,"action":"gcx:wf:arcgis::BufferEngineTask","position":"540,150","title":"Buffer Geometry","name":"buffer1"},{"inputs":{"json":"{\n  \"type\": \"esriSFS\",\n  \"style\": \"esriSFSSolid\",\n  \"color\": [18,95,171,70],\n    \"outline\": {\n     \"type\": \"esriSLS\",\n     \"style\": \"esriSLSSolid\",\n     \"color\": [0,0,0,255],\n     \"width\": 1\n\t }\n}"},"transitions":[{"inputs":{},"id":570,"target":{"id":540},"position":"660,330 660,380","sourceConnector":"bottom","targetConnector":"top"}],"id":526,"action":"gcx:wf:arcgis::SymbolFromJson","position":"540,270","title":"Get Symbol From JSON","name":"symbol2"},{"inputs":{"geometry":{"accessors":["$buffer1"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$buffer1.geometry","source":"$buffer1.geometry"},"symbol":{"accessors":["$symbol2"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$symbol2.symbol","source":"$symbol2.symbol"}},"transitions":[{"inputs":{},"id":584,"target":{"id":548},"position":"660,440 660,490","sourceConnector":"bottom","targetConnector":"top"}],"id":540,"action":"gcx:wf:arcgis::CreateGraphic","position":"540,380","title":"Create Feature","name":"feature2"},{"inputs":{"features":{"accessors":["$feature2"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$feature2.feature","source":"$feature2.feature"},"layerId":"lyr_CurrentPosition_buffer_result","removeAllFeatures":true},"transitions":[{"inputs":{},"id":592,"target":{"id":558},"position":"660,550 660,600","sourceConnector":"bottom","targetConnector":"top"}],"id":548,"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","position":"540,490","title":"Add Graphics Layer Features","name":"addGraphicsLayerFeatures2"},{"inputs":{"features":{"accessors":["$addGraphicsLayerFeatures2"],"annotations":[{"kind":"idref","index":0,"count":26}],"code":"$addGraphicsLayerFeatures2.features","source":"$addGraphicsLayerFeatures2.features"}},"transitions":[{"inputs":{},"id":610,"target":{"id":204},"position":"540,630 230,630 230,210 90,210 90,230","sourceConnector":"left","targetConnector":"top"}],"id":558,"action":"gcx:wf:arcgis::SetViewExtent","position":"540,600","title":"Set Map Extent","name":"setMapExtent2"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.geometryServiceUrl","source":"$wfInputs.json.geometryServiceUrl"},"geometry":{"accessors":["$buffer1"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$buffer1.geometry","source":"$buffer1.geometry"},"outSpatialReference":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.cityworksSpatialReference","source":"$wfInputs.json.cityworksSpatialReference"}},"transitions":[{"inputs":{},"id":214,"target":{"id":206},"position":"90,290 90,340","sourceConnector":"bottom"}],"id":204,"action":"gcx:wf:arcgis::ProjectServiceTask","position":"-30,230","title":"Project Geometry","name":"projectGeometry"},{"inputs":{"geometry":{"accessors":["$projectGeometry"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$projectGeometry.geometry","source":"$projectGeometry.geometry"}},"transitions":[{"inputs":{},"id":520,"target":{"id":521},"position":"90,400 90,500 -220,500 -220,520","sourceConnector":"bottom","targetConnector":"top"}],"id":206,"action":"gcx:wf:arcgis::GetGeometryExtent","position":"-30,340","title":"Get Geometry Extent","name":"geometryExtent"},{"inputs":{"key":"UserInfo"},"transitions":[{"inputs":{},"id":522,"target":{"id":519},"position":"-220,580 -220,600 -60,600 -60,520 80,520 80,540","sourceConnector":"bottom","targetConnector":"top"}],"id":521,"action":"gcx:wf:app::GetApplicationData","position":"-340,520","title":"Get UserInfo","name":"getApplicationData1"},{"inputs":{"object":{"accessors":["$geometryExtent","$geometryExtent","$geometryExtent","$geometryExtent","$getApplicationData1"],"annotations":[{"kind":"idref","index":24,"count":15},{"kind":"idref","index":64,"count":15},{"kind":"idref","index":103,"count":15},{"kind":"idref","index":143,"count":15},{"kind":"idref","index":228,"count":20}],"code":"{\n    Extent: {\n        XMax: $geometryExtent.extent.xmax,\n        XMin: $geometryExtent.extent.xmin,\n        YMax: $geometryExtent.extent.ymax,\n        YMin: $geometryExtent.extent.ymin\n    },\n    Closed: false,\n    Canceled: false,\n    SubmitToSid: [$getApplicationData1.value.Value.EmployeeSid],\n    Status: [\"APPR\", \"ASSG\", \"AWAPPR\", \"CANTP\", \"CONTRCTR\", \"DEFERRED\", \"HOLD\", \"INTP\", \"IP\", \"OPEN\", \"PENDING\", \"RECEIVED\", \"REJECTED\", \"SUBMITTED\", \"UNFOUND\", \"WAFNTP\"]\n}","source":"{\n  Extent: {\n    XMax: $geometryExtent.extent.xmax, \n    XMin: $geometryExtent.extent.xmin,\n    YMax: $geometryExtent.extent.ymax, \n    YMin: $geometryExtent.extent.ymin  \n  },\n  Closed:false,\n  Canceled: false,\n  SubmitToSid:[$getApplicationData1.value.Value.EmployeeSid],\n  Status:[\"APPR\",\"ASSG\",\"AWAPPR\",\"CANTP\",\"CONTRCTR\",\"DEFERRED\",\"HOLD\",\"INTP\",\"IP\",\"OPEN\",\"PENDING\",\"RECEIVED\",\"REJECTED\",\"SUBMITTED\",\"UNFOUND\",\"WAFNTP\"]\n}"}},"id":519,"action":"gcx:wf:core::ConvertToJson","position":"-40,540","title":"Create SR Search JSON","description":"Create a filter to find all SRs in the Extent object that are assigned to the user, not closed, and not cancelled.","name":"cityworksSRSearchJson"}],"id":198},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":83,"target":{"id":115},"position":"-140,-20 -20,-20 -20,-70 120,-70 120,-50","targetConnector":"top"}],"id":60,"purpose":"start","title":"Container","position":"-320,-50"},{"inputs":{"enableHighAccuracy":true,"maximumAge":60000,"timeout":30000,"useMultipleReadings":false},"transitions":[{"inputs":{},"id":735,"target":{"id":118},"position":"120,10 120,50 470,50 470,80","sourceConnector":"bottom","targetConnector":"top"}],"id":115,"action":"gcx:wf:arcgis::GetCurrentPosition","position":"0,-50","title":"Get Current Position","name":"currentPosition1"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.geometryServiceUrl","source":"$wfInputs.json.geometryServiceUrl"},"geometry":{"accessors":["$currentPosition1"],"annotations":[{"kind":"idref","index":0,"count":17}],"code":"$currentPosition1.position","source":"$currentPosition1.position"},"outSpatialReference":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.mapSpatialReference","source":"$wfInputs.json.mapSpatialReference"}},"transitions":[{"inputs":{},"id":736,"target":{"id":127},"position":"470,140 470,160 260,160 260,130 240,130","sourceConnector":"bottom","targetConnector":"right"}],"id":118,"action":"gcx:wf:arcgis::ProjectServiceTask","position":"350,80","title":"Project Geometry","name":"projectGeometry1"},{"inputs":{"items":{"accessors":["$projectGeometry1"],"annotations":[{"kind":"idref","index":0,"count":17}],"code":"$projectGeometry1.results","source":"$projectGeometry1.results"}},"id":127,"action":"gcx:wf:core:loop:ForEach","position":"0,70","title":"For Each","name":"forEach1"}],"id":58},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":691,"target":{"id":150},"position":"90,60 90,380 160,380 160,400","sourceConnector":"bottom","targetConnector":"top"}],"id":129,"purpose":"start","title":"For Each","position":"0,0"},{"inputs":{"x":{"accessors":["$forEach1"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$forEach1.item.x","source":"$forEach1.item.x"},"y":{"accessors":["$forEach1"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$forEach1.item.y","source":"$forEach1.item.y"},"spatialReference":{"accessors":["$forEach1"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$forEach1.item.spatialReference.wkid","source":"$forEach1.item.spatialReference.wkid"}},"transitions":[{"inputs":{},"id":158,"target":{"id":168},"position":"160,460 160,480 320,480 320,340 570,340 570,360","sourceConnector":"bottom","targetConnector":"top"}],"id":150,"action":"gcx:wf:arcgis::CreatePoint","position":"40,400","title":"Create Point","name":"point1"},{"inputs":{"json":"{\n   \"url\":\"https://mottesen-cityworks.github.io/wab_wf5_assignments/images/SAM-01.png\",   \n   \"type\": \"esriPMS\",\n   \"height\": 100,\n   \"width\": 64,\n   \"yoffset\": 40,\n   \"xoffset\": 10,\n   \"angle\": 0\n}"},"transitions":[{"inputs":{},"id":169,"target":{"id":152},"position":"570,420 570,450 460,450 460,470","sourceConnector":"bottom","targetConnector":"top"}],"id":168,"action":"gcx:wf:arcgis::SymbolFromJson","position":"450,360","title":"Get Symbol From JSON","name":"symbol1"},{"inputs":{"geometry":{"accessors":["$point1"],"annotations":[{"kind":"idref","index":0,"count":7}],"code":"$point1.point","source":"$point1.point"},"symbol":{"accessors":["$symbol1"],"annotations":[{"kind":"idref","index":0,"count":8}],"code":"$symbol1.symbol","source":"$symbol1.symbol"}},"transitions":[{"inputs":{},"id":742,"target":{"id":170},"position":"460,530 460,570 180,570 180,590","sourceConnector":"bottom","targetConnector":"top"}],"id":152,"action":"gcx:wf:arcgis::CreateGraphic","position":"340,470","title":"Create Feature","name":"feature1"},{"inputs":{"layerId":"lyr_CurrentPosition","features":{"accessors":["$feature1"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$feature1.feature","source":"$feature1.feature"},"removeAllFeatures":true},"id":170,"action":"gcx:wf:arcgis::AddGraphicsLayerFeatures","position":"60,590","title":"Add Graphics Layer Features","name":"addGraphicsLayerFeatures1"}],"id":128},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":384,"target":{"id":371},"position":"110,60 110,220 120,220 120,240","sourceConnector":"bottom","targetConnector":"top"}],"id":32,"purpose":"start","title":"Container","position":"20,0"},{"inputs":{},"id":371,"action":"gcx:wf:core::TryCatch","position":"0,240","title":"Try Catch","description":"","name":"authenticationTryCatch"}],"id":30},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":388,"target":{"id":122},"position":"100,-380 100,-330","sourceConnector":"bottom","targetConnector":"top"}],"id":114,"purpose":"start","title":"Try","position":"10,-440"},{"inputs":{"expression":{"accessors":[],"code":"\"next\"","source":"\"next\""}},"transitions":[{"inputs":{},"id":182,"target":{"id":124},"position":"100,-200 100,-150","sourceConnector":"bottom"}],"id":122,"action":"gcx:wf:core::CreateValue","position":"-20,-330","title":"Workflow Navigation","description":"A global variable that maintains the navigation state of the Workflow","name":"wfNav"},{"inputs":{"key":"CachedToken"},"transitions":[{"inputs":{},"id":185,"target":{"id":126},"position":"100,-40 100,240"}],"id":124,"action":"gcx:wf:app::GetApplicationData","position":"-20,-150","title":"Get Cached Token","description":"Check application data to see if we already have a token","name":"cachedToken"},{"inputs":{"condition":{"accessors":["$cachedToken"],"annotations":[{"kind":"idref","index":7,"count":12}],"code":"typeof ($cachedToken.value) == \"undefined\"","source":"typeof($cachedToken.value) == \"undefined\""}},"transitions":[{"inputs":{},"id":196,"target":{"id":133},"branch":"false","position":"220,285 360,285 360,420","sourceConnector":"right","targetConnector":"top"},{"inputs":{},"id":199,"target":{"id":135},"branch":"true","position":"-20,285 -150,285 -150,410","sourceConnector":"left","targetConnector":"top"}],"id":126,"action":"gcx:wf:core::If","position":"-20,240","title":"If","description":"Don't have a token?"},{"inputs":{},"transitions":[{"inputs":{},"id":203,"target":{"id":137},"position":"360,510 360,570","sourceConnector":"bottom","targetConnector":"top"}],"id":133,"action":"gcx:wf:core::Container","position":"240,420","title":"Validate Token"},{"inputs":{"value":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result","source":"$wfNav.result"}},"transitions":[{"inputs":{},"id":207,"target":{"id":135},"position":"240,600 -10,600 -10,390 -150,390 -150,410","purpose":"default","sourceConnector":"left","targetConnector":"top","title":"failed"},{"inputs":{},"id":209,"target":{"id":484},"branch":"next","position":"360,630 360,730","sourceConnector":"bottom","targetConnector":"top"}],"id":137,"action":"gcx:wf:core::Switch","position":"240,570","title":"Navigation"},{"inputs":{"form":{"accessors":[],"code":"resources.forms[values.id]","values":{"id":369}},"reset":false},"transitions":[{"inputs":{},"id":213,"target":{"id":141},"position":"-150,530 -150,700","targetConnector":"top"}],"id":135,"action":"gcx:wf:forms:form:DisplayForm","position":"-270,410","title":"Login Form","name":"loginForm"},{"inputs":{"condition":{"accessors":["$loginForm"],"annotations":[{"kind":"idref","index":0,"count":10}],"code":"$loginForm.result == \"login\"","source":"$loginForm.result == \"login\""}},"transitions":[{"inputs":{},"id":216,"target":{"id":147},"branch":"false","position":"-30,745 -10,745 -10,830 -170,830 -170,850","sourceConnector":"right","targetConnector":"top"},{"inputs":{},"id":219,"target":{"id":151},"branch":"true","position":"-270,745 -360,745 -360,725 -380,725","sourceConnector":"left"}],"id":141,"action":"gcx:wf:core::If","description":"Log In?","position":"-270,700","title":"If "},{"inputs":{"message":{"accessors":[],"code":"\"Authentication cancelled.\"","source":"\"Authentication cancelled.\""}},"transitions":[{"inputs":{},"id":228,"target":{"id":155},"position":"-170,880 -170,980"}],"id":147,"action":"gcx:wf:core::Log","position":"-290,850","title":"Log"},{"inputs":{"name":"authenticated","value":false},"id":155,"action":"gcx:wf:core::SetWorkflowOutput","position":"-290,980","title":"Set Workflow Output"},{"inputs":{},"transitions":[{"inputs":{},"id":231,"target":{"id":159},"position":"-500,770 -500,820","sourceConnector":"bottom"}],"id":151,"action":"gcx:wf:core::Container","position":"-620,680","title":"Generate Token"},{"inputs":{"value":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result","source":"$wfNav.result"}},"transitions":[{"inputs":{},"id":233,"target":{"id":135},"position":"-620,850 -640,850 -640,470 -270,470","purpose":"default","sourceConnector":"left","targetConnector":"left","title":"failed"},{"inputs":{},"id":235,"target":{"id":163},"branch":"next","position":"-500,880 -500,960","sourceConnector":"bottom","targetConnector":"top"}],"id":159,"action":"gcx:wf:core::Switch","position":"-620,820","title":"Navigation"},{"inputs":{},"transitions":[{"inputs":{},"id":237,"target":{"id":165},"position":"-500,1050 -500,1100","sourceConnector":"bottom"}],"id":163,"action":"gcx:wf:core::Container","position":"-620,960","title":"Generate User"},{"inputs":{"name":"authenticated","value":true},"id":165,"action":"gcx:wf:core::SetWorkflowOutput","position":"-620,1100","title":"Set Workflow Output"},{"inputs":{},"transitions":[{"inputs":{},"id":488,"target":{"id":139},"position":"360,820 360,860","sourceConnector":"bottom","targetConnector":"top"}],"id":484,"action":"gcx:wf:core::Container","position":"240,730","title":"Generate User"},{"inputs":{"name":"authenticated","value":true},"id":139,"action":"gcx:wf:core::SetWorkflowOutput","position":"240,860","title":"Set Workflow Output","description":"Already have a token. Set authenticated flag to true."}],"id":112},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":251,"target":{"id":466},"position":"200,-260 370,-260 370,-210","targetConnector":"top"}],"id":241,"purpose":"start","title":"Container","position":"20,-290"},{"inputs":{"condition":{"accessors":["$formLoginName"],"annotations":[{"kind":"idref","index":0,"count":14}],"code":"$formLoginName.result.LoginName != undefined","source":"$formLoginName.result.LoginName != undefined"}},"transitions":[{"inputs":{},"id":467,"target":{"id":393},"branch":"true","position":"310,-180 110,-180 110,-160","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":471,"target":{"id":470},"branch":"false","position":"430,-180 510,-180 510,-140","sourceConnector":"right","targetConnector":"top"}],"id":466,"action":"gcx:wf:core::If","position":"310,-210","title":"If"},{"inputs":{"object":{"accessors":["$formLoginName"],"annotations":[{"kind":"idref","index":15,"count":14}],"code":"{\n    \"LoginName\": $formLoginName.result.LoginName\n}","source":"{\n\t\"LoginName\":$formLoginName.result.LoginName\n}"}},"transitions":[{"inputs":{},"id":757,"target":{"id":243},"position":"110,-70 110,70 90,70 90,90","sourceConnector":"bottom","targetConnector":"top"}],"id":393,"action":"gcx:wf:core::ConvertToJson","position":"-10,-160","title":"Create Post data from form","description":"Convert username to JSON string","name":"loginNameJson"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$newToken","$loginNameJson"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":34,"count":9},{"kind":"idref","index":81,"count":9},{"kind":"idref","index":114,"count":14}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.getUserInfo + \"?token=\" + $newToken.result, data: \"data=\" + $loginNameJson.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl +$wfInputs.json.paths.getUserInfo + \"?token=\" + $newToken.result, data:\"data=\" + $loginNameJson.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":253,"target":{"id":245},"position":"90,200 90,290","sourceConnector":"bottom","targetConnector":"top"}],"id":243,"action":"gcx:wf:core::RunWorkflow","description":"Make a request to get the user's details","position":"-30,90","title":"Generate User","name":"userDetails"},{"inputs":{"condition":{"accessors":["$userDetails","$userDetails","$userDetails"],"annotations":[{"kind":"idref","index":7,"count":12},{"kind":"idref","index":53,"count":12},{"kind":"idref","index":102,"count":12}],"code":"typeof ($userDetails.result) != \"undefined\" && typeof ($userDetails.result.response) != \"undefined\" && $userDetails.result.response.success == true","source":"typeof($userDetails.result) != \"undefined\" && typeof($userDetails.result.response) != \"undefined\" &&  $userDetails.result.response.success == true"}},"transitions":[{"inputs":{},"id":257,"target":{"id":249},"branch":"true","position":"-30,335 -160,335 -160,320 -180,320"},{"inputs":{},"id":478,"target":{"id":477},"branch":"false","position":"210,335 230,335 230,480 190,480 190,500","sourceConnector":"right","targetConnector":"top"}],"id":245,"action":"gcx:wf:core::If","position":"-30,290","title":"If","description":"Is valid user response?"},{"inputs":{"key":"UserInfo","value":{"accessors":["$userDetails"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$userDetails.result.response.responseJson","source":"$userDetails.result.response.responseJson"}},"id":249,"action":"gcx:wf:app::SetApplicationData","position":"-420,290","title":"Set Application Data","description":"Add User to application"},{"inputs":{"condition":{"accessors":["$userDetails1","$userDetails1","$userDetails1"],"annotations":[{"kind":"idref","index":7,"count":13},{"kind":"idref","index":54,"count":13},{"kind":"idref","index":104,"count":13}],"code":"typeof ($userDetails1.result) != \"undefined\" && typeof ($userDetails1.result.response) != \"undefined\" && $userDetails1.result.response.success == true","source":"typeof($userDetails1.result) != \"undefined\" && typeof($userDetails1.result.response) != \"undefined\" &&  $userDetails1.result.response.success == true"}},"transitions":[{"inputs":{},"id":482,"target":{"id":481},"branch":"true","position":"130,530 -90,530 -90,570","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":483,"target":{"id":247},"branch":"false","position":"250,530 420,530 420,305 440,305","sourceConnector":"right","targetConnector":"left"}],"id":477,"action":"gcx:wf:core::If","position":"130,500","title":"If"},{"inputs":{"key":"UserInfo","value":{"accessors":["$userDetails1"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails1.result.response.responseJson","source":"$userDetails1.result.response.responseJson"}},"id":481,"action":"gcx:wf:app::SetApplicationData","position":"-210,570","title":"Set Application Data","description":"Add User to application"},{"inputs":{"code":{"accessors":["$userDetails"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$userDetails.result.response.responseJson.Status","source":"$userDetails.result.response.responseJson.Status"},"message":{"accessors":["$userDetails"],"annotations":[{"kind":"idref","index":0,"count":12}],"code":"$userDetails.result.response.responseJson.ErrorMessages","source":"$userDetails.result.response.responseJson.ErrorMessages"},"error":{"accessors":["$userDetails1"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails1.result.response.responseJson.ErrorMessages","source":"$userDetails1.result.response.responseJson.ErrorMessages"}},"id":247,"action":"gcx:wf:core::Throw","description":"Something went wrong. Throw an error.","position":"440,250","title":"Throw"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$newToken","$loginNameJson1"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":34,"count":9},{"kind":"idref","index":81,"count":9},{"kind":"idref","index":113,"count":15}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.getUserInfo + \"?token=\" + $newToken.result, data: \"data=\" + $loginNameJson1.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl +$wfInputs.json.paths.getUserInfo + \"?token=\" + $newToken.result, data:\"data=\" +$loginNameJson1.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":476,"target":{"id":245},"position":"430,110 430,160 230,160 230,270 90,270 90,290","sourceConnector":"bottom","targetConnector":"top"}],"id":474,"action":"gcx:wf:core::RunWorkflow","description":"Make a request to get the user's details","position":"310,0","title":"Generate User","name":"userDetails1"},{"inputs":{"object":{"accessors":["$cachedLoginName"],"annotations":[{"kind":"idref","index":15,"count":16}],"code":"{\n    \"LoginName\": $cachedLoginName.result.LoginName\n}","source":"{\n\t\"LoginName\":$cachedLoginName.result.LoginName\n}"}},"transitions":[{"inputs":{},"id":475,"target":{"id":474},"position":"510,-50 510,-20 430,-20 430,0","sourceConnector":"bottom","targetConnector":"top"}],"id":470,"action":"gcx:wf:core::ConvertToJson","position":"390,-140","title":"Create Post data from cache","description":"Convert username to JSON string","name":"loginNameJson1"}],"id":239},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":287,"target":{"id":263},"position":"90,-600 90,-540"}],"id":261,"purpose":"start","title":"Container","position":"0,-660"},{"inputs":{"key":"CachedCredentials"},"transitions":[{"inputs":{},"id":289,"target":{"id":265},"position":"90,-480 90,-430","sourceConnector":"bottom"}],"id":263,"action":"gcx:wf:app::GetApplicationData","position":"-30,-540","title":"Get Application Data","name":"cachedCreds"},{"inputs":{"condition":{"accessors":["$cachedCreds","$cachedCreds"],"annotations":[{"kind":"idref","index":7,"count":12},{"kind":"idref","index":45,"count":12}],"code":"typeof ($cachedCreds.value) != \"undefined\" && $cachedCreds.value != null","source":"typeof($cachedCreds.value) != \"undefined\"  &&$cachedCreds.value != null"}},"transitions":[{"inputs":{},"id":291,"target":{"id":456},"branch":"true","position":"30,-400 -100,-400 -100,-560 -240,-560 -240,-540","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":293,"target":{"id":459},"branch":"false","position":"150,-400 440,-400 440,-450 580,-450 580,-430","sourceConnector":"right","targetConnector":"top"}],"id":265,"action":"gcx:wf:core::If","position":"30,-430","title":"If"},{"inputs":{"expression":{"accessors":["$cachedCreds"],"annotations":[{"kind":"idref","index":15,"count":12}],"code":"{\n    \"LoginName\": $cachedCreds.value.username.value\n}","source":"{\n\t\"LoginName\":$cachedCreds.value.username.value\n}"}},"transitions":[{"inputs":{},"id":461,"target":{"id":435},"position":"-240,-480 -240,-460 -290,-460 -290,-440","sourceConnector":"bottom","targetConnector":"top"}],"id":456,"action":"gcx:wf:core::CreateValue","position":"-360,-540","title":"LoginName (cached)","name":"cachedLoginName"},{"inputs":{"message":{"accessors":["$cachedLoginName"],"annotations":[{"kind":"idref","index":0,"count":16}],"code":"$cachedLoginName.result","source":"$cachedLoginName.result"}},"transitions":[{"inputs":{},"id":436,"target":{"id":267},"position":"-290,-410 -290,-320 -170,-320 -170,-300","sourceConnector":"bottom","targetConnector":"top"}],"id":435,"action":"gcx:wf:core::Log","position":"-410,-440","title":"Log"},{"inputs":{"object":{"accessors":["$cachedCreds","$cachedCreds"],"annotations":[{"kind":"idref","index":15,"count":12},{"kind":"idref","index":63,"count":12}],"code":"{\n    \"LoginName\": $cachedCreds.value.username.value,\n    \"Password\": $cachedCreds.value.password.value\n}","source":"{\n\t\"LoginName\":$cachedCreds.value.username.value,\n\t\"Password\": $cachedCreds.value.password.value\n}"}},"transitions":[{"inputs":{},"id":295,"target":{"id":401},"position":"-170,-190 -170,-175 -270,-175 -270,-160","sourceConnector":"bottom","targetConnector":"top"}],"id":267,"action":"gcx:wf:core::ConvertToJson","position":"-290,-300","title":"Create Post data from cache","description":"Convert username and password to JSON string","name":"loginJson2"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$loginJson2"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":35,"count":9},{"kind":"idref","index":90,"count":11}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.authenticateUser, data: \"data=\" + $loginJson2.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl + $wfInputs.json.paths.authenticateUser, data:  \"data=\" +$loginJson2.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":429,"target":{"id":428},"position":"-270,-50 -270,10","sourceConnector":"bottom","targetConnector":"top"}],"id":401,"action":"gcx:wf:core::RunWorkflow","description":"Make a Token request using the username and password","position":"-390,-160","title":"Generate Token","name":"genToken1"},{"inputs":{"condition":{"accessors":["$genToken1","$genToken1","$genToken1"],"annotations":[{"kind":"idref","index":7,"count":10},{"kind":"idref","index":51,"count":10},{"kind":"idref","index":98,"count":10}],"code":"typeof ($genToken1.result) != \"undefined\" && typeof ($genToken1.result.response) != \"undefined\" && $genToken1.result.response.success == true","source":"typeof($genToken1.result) != \"undefined\" && typeof($genToken1.result.response) != \"undefined\" &&  $genToken1.result.response.success == true"}},"transitions":[{"inputs":{},"id":437,"target":{"id":409},"branch":"true","position":"-390,55 -410,55 -410,240 -310,240 -310,260","sourceConnector":"left","targetConnector":"top"},{"inputs":{},"id":434,"target":{"id":433},"branch":"false","position":"-150,55 -230,55 -230,130","sourceConnector":"right","targetConnector":"top"}],"id":428,"action":"gcx:wf:core::If","position":"-390,10","title":"If","description":"Is valid response?"},{"inputs":{"expression":{"accessors":["$genToken1"],"annotations":[{"kind":"idref","index":0,"count":10}],"code":"$genToken1.result.response.responseJson.Value.Token","source":"$genToken1.result.response.responseJson.Value.Token"}},"transitions":[{"inputs":{},"id":756,"target":{"id":413},"position":"-310,320 -310,390 -290,390 -290,410","sourceConnector":"bottom","targetConnector":"top"}],"id":409,"action":"gcx:wf:core::CreateValue","position":"-430,260","title":"Create Token","name":"newToken1"},{"inputs":{"key":"CachedToken","value":{"accessors":["$newToken1"],"annotations":[{"kind":"idref","index":0,"count":10}],"code":"$newToken1.result","source":"$newToken1.result"}},"transitions":[{"inputs":{},"id":423,"target":{"id":415},"position":"-290,470 -290,510"}],"id":413,"action":"gcx:wf:app::SetApplicationData","position":"-410,410","title":"Set Token","description":"Add token to Application"},{"inputs":{"key":"CachedCredentials","value":{"accessors":["$loginForm","$loginForm"],"annotations":[{"kind":"idref","index":13,"count":10},{"kind":"idref","index":57,"count":10}],"code":"{\n    username: $loginForm.state.username.value,\n    password: $loginForm.state.password.value\n}","source":"{\n  username:$loginForm.state.username.value,\n  password:$loginForm.state.password.value\n}"}},"transitions":[{"inputs":{},"id":425,"target":{"id":417},"position":"-410,550 -440,550 -440,640 -420,640"}],"id":415,"action":"gcx:wf:app::SetApplicationData","position":"-410,510","title":"Set Credentials","description":"Add credentials to application data"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"next\"","source":"$wfNav.result = \"next\""}},"id":417,"action":"gcx:wf:core::Evaluate","position":"-420,610","title":"Set Navigation to next","name":"evaluate5"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"failed\"","source":"$wfNav.result = \"failed\""}},"id":433,"action":"gcx:wf:core::Evaluate","position":"-350,130","title":"Set Navigation to failed","name":"evaluate6"},{"inputs":{"expression":{"accessors":["$loginForm"],"annotations":[{"kind":"idref","index":15,"count":10}],"code":"{\n    \"LoginName\": $loginForm.state.username.value\n}","source":"{\n\t\"LoginName\":$loginForm.state.username.value\n}"}},"transitions":[{"inputs":{},"id":754,"target":{"id":269},"position":"580,-370 580,-275 430,-275","sourceConnector":"bottom","targetConnector":"right"}],"id":459,"action":"gcx:wf:core::CreateValue","position":"460,-430","title":"LoginName (form)","name":"formLoginName"},{"inputs":{"object":{"accessors":["$loginForm","$loginForm"],"annotations":[{"kind":"idref","index":15,"count":10},{"kind":"idref","index":61,"count":10}],"code":"{\n    \"LoginName\": $loginForm.state.username.value,\n    \"Password\": $loginForm.state.password.value\n}","source":"{\n\t\"LoginName\":$loginForm.state.username.value,\n\t\"Password\": $loginForm.state.password.value\n}"}},"transitions":[{"inputs":{},"id":313,"target":{"id":271},"position":"310,-220 310,-180 90,-180 90,-160","sourceConnector":"bottom","targetConnector":"top"}],"id":269,"action":"gcx:wf:core::ConvertToJson","position":"190,-330","title":"Create Post data from form","description":"Convert username and password to JSON string","name":"loginJson1"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$loginJson1"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":35,"count":9},{"kind":"idref","index":91,"count":11}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.authenticateUser, data: \"data=\" + $loginJson1.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl + $wfInputs.json.paths.authenticateUser, data:  \"data=\" + $loginJson1.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":297,"target":{"id":273},"position":"90,-50 90,10","sourceConnector":"bottom","targetConnector":"top"}],"id":271,"action":"gcx:wf:core::RunWorkflow","description":"Make a Token request using the username and password","position":"-30,-160","title":"Generate Token","name":"genToken"},{"inputs":{"condition":{"accessors":["$genToken","$genToken","$genToken"],"annotations":[{"kind":"idref","index":7,"count":9},{"kind":"idref","index":50,"count":9},{"kind":"idref","index":96,"count":9}],"code":"typeof ($genToken.result) != \"undefined\" && typeof ($genToken.result.response) != \"undefined\" && $genToken.result.response.success == true","source":"typeof($genToken.result) != \"undefined\" && typeof($genToken.result.response) != \"undefined\" &&  $genToken.result.response.success == true"}},"transitions":[{"inputs":{},"id":445,"target":{"id":277},"branch":"false","position":"210,55 140,55 140,120","sourceConnector":"right","targetConnector":"top"},{"inputs":{},"id":430,"target":{"id":279},"branch":"true","position":"-30,55 -50,55 -50,230 140,230 140,250","sourceConnector":"left","targetConnector":"top"}],"id":273,"action":"gcx:wf:core::If","position":"-30,10","title":"If","description":"Is valid response?"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"failed\"","source":"$wfNav.result = \"failed\""}},"id":277,"action":"gcx:wf:core::Evaluate","position":"20,120","title":"Set Navigation to failed","name":"evaluate1"},{"inputs":{"expression":{"accessors":["$genToken"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$genToken.result.response.responseJson.Value.Token","source":"$genToken.result.response.responseJson.Value.Token"}},"transitions":[{"inputs":{},"id":755,"target":{"id":281},"position":"140,310 140,420","sourceConnector":"bottom","targetConnector":"top"}],"id":279,"action":"gcx:wf:core::CreateValue","position":"20,250","title":"Create Token","name":"newToken"},{"inputs":{"key":"CachedToken","value":{"accessors":["$newToken"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$newToken.result","source":"$newToken.result"}},"transitions":[{"inputs":{},"id":309,"target":{"id":283},"position":"140,480 140,520"}],"id":281,"action":"gcx:wf:app::SetApplicationData","position":"20,420","title":"Set Token","description":"Add token to Application"},{"inputs":{"key":"CachedCredentials","value":{"accessors":["$loginForm","$loginForm"],"annotations":[{"kind":"idref","index":13,"count":10},{"kind":"idref","index":57,"count":10}],"code":"{\n    username: $loginForm.state.username.value,\n    password: $loginForm.state.password.value\n}","source":"{\n  username:$loginForm.state.username.value,\n  password:$loginForm.state.password.value\n}"}},"transitions":[{"inputs":{},"id":311,"target":{"id":285},"position":"140,600 140,620 130,620 130,640"}],"id":283,"action":"gcx:wf:app::SetApplicationData","position":"20,520","title":"Set Credentials","description":"Add credentials to application data"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"next\"","source":"$wfNav.result = \"next\""}},"id":285,"action":"gcx:wf:core::Evaluate","position":"10,640","title":"Set Navigation to next","name":"evaluate2"}],"id":259},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":323,"target":{"id":319},"position":"90,60 90,110"}],"id":317,"purpose":"start","title":"Event","position":"0,0"},{"inputs":{"condition":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result == \"failed\"","source":"$wfNav.result == \"failed\""}},"transitions":[{"inputs":{},"id":325,"target":{"id":321},"branch":"true","position":"30,140 -40,140 -40,265 -60,265","sourceConnector":"left"}],"id":319,"action":"gcx:wf:core::If","position":"30,110","title":"If"},{"inputs":{"form":{"accessors":["$$form"],"code":"$$form","source":"$$form","annotations":[{"kind":"idref","index":0,"count":6}]},"elementName":{"accessors":["$loginForm"],"annotations":[{"kind":"idref","index":0,"count":10}],"code":"$loginForm.state.loginFailedText","source":"$loginForm.state.loginFailedText"}},"id":321,"action":"gcx:wf:forms::ShowFormElement","position":"-300,250","title":"Show Form Element"}],"id":315,"title":"load-loginFailedText"},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":506,"target":{"id":512},"position":"90,60 90,80 220,80 220,40 360,40 360,60","sourceConnector":"bottom","targetConnector":"top"}],"id":486,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"key":"CachedCredentials"},"transitions":[{"inputs":{},"id":515,"target":{"id":514},"position":"360,120 360,230 460,230 460,250","sourceConnector":"bottom","targetConnector":"top"}],"id":512,"action":"gcx:wf:app::GetApplicationData","position":"240,60","title":"Get Application Data","name":"cachedCreds1"},{"inputs":{"expression":{"accessors":["$cachedCreds1"],"annotations":[{"kind":"idref","index":15,"count":13}],"code":"{\n    \"LoginName\": $cachedCreds1.value.username.value\n}","source":"{\n\t\"LoginName\":$cachedCreds1.value.username.value\n}"}},"transitions":[{"inputs":{},"id":516,"target":{"id":491},"position":"340,280 240,280 240,185 220,185","sourceConnector":"left","targetConnector":"right"}],"id":514,"action":"gcx:wf:core::CreateValue","position":"340,250","title":"LoginName (cached)","name":"cachedLoginName1"},{"inputs":{"object":{"accessors":["$cachedLoginName1"],"annotations":[{"kind":"idref","index":0,"count":17}],"code":"$cachedLoginName1.result","source":"$cachedLoginName1.result\n"}},"transitions":[{"inputs":{},"id":501,"target":{"id":493},"position":"100,230 100,260 20,260 20,280","sourceConnector":"bottom","targetConnector":"top"}],"id":491,"action":"gcx:wf:core::ConvertToJson","position":"-20,140","title":"Create Post data from cache","description":"Convert username to JSON string","name":"loginNameJson2"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken","$loginNameJson2"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":34,"count":9},{"kind":"idref","index":81,"count":12},{"kind":"idref","index":115,"count":15}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.getUserInfo + \"?token=\" + $cachedToken.value, data: \"data=\" + $loginNameJson2.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl +$wfInputs.json.paths.getUserInfo + \"?token=\" + $cachedToken.value, data:\"data=\" +$loginNameJson2.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":753,"target":{"id":495},"position":"20,390 20,570","sourceConnector":"bottom","targetConnector":"top"}],"id":493,"action":"gcx:wf:core::RunWorkflow","description":"Make a request to get the user's details","position":"-100,280","title":"Generate User","name":"userDetails2"},{"inputs":{"condition":{"accessors":["$userDetails2","$userDetails2","$userDetails2"],"annotations":[{"kind":"idref","index":7,"count":13},{"kind":"idref","index":54,"count":13},{"kind":"idref","index":104,"count":13}],"code":"typeof ($userDetails2.result) != \"undefined\" && typeof ($userDetails2.result.response) != \"undefined\" && $userDetails2.result.response.success == true","source":"typeof($userDetails2.result) != \"undefined\" && typeof($userDetails2.result.response) != \"undefined\" &&  $userDetails2.result.response.success == true"}},"transitions":[{"inputs":{},"id":505,"target":{"id":499},"branch":"false","position":"80,600 290,595","sourceConnector":"right","targetConnector":"left"},{"inputs":{},"id":503,"target":{"id":497},"branch":"true","position":"-40,600 -300,600 -300,550 -440,550 -440,570","sourceConnector":"left","targetConnector":"top"}],"id":495,"action":"gcx:wf:core::If","position":"-40,570","title":"If"},{"inputs":{"code":{"accessors":["$userDetails2"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails2.result.response.responseJson.Status","source":"$userDetails2.result.response.responseJson.Status"},"message":{"accessors":["$userDetails2"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails2.result.response.responseJson.WarningMessages","source":"$userDetails2.result.response.responseJson.WarningMessages"},"error":{"accessors":["$userDetails2"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails2.result.response.responseJson.ErrorMessages","source":"$userDetails2.result.response.responseJson.ErrorMessages"}},"id":499,"action":"gcx:wf:core::Throw","description":"Something went wrong. Throw an error.","position":"290,540","title":"Throw"},{"inputs":{"key":"UserInfo","value":{"accessors":["$userDetails2"],"annotations":[{"kind":"idref","index":0,"count":13}],"code":"$userDetails2.result.response.responseJson","source":"$userDetails2.result.response.responseJson"}},"id":497,"action":"gcx:wf:app::SetApplicationData","position":"-560,570","title":"Set Application Data","description":"Add User to application"}],"id":485},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":343,"target":{"id":335},"position":"110,-100 110,-50"}],"id":333,"purpose":"start","title":"Container","position":"20,-160"},{"inputs":{"object":{"accessors":["$cachedToken"],"annotations":[{"kind":"idref","index":10,"count":12}],"code":"{\n    Token: $cachedToken.value\n}","source":"{\n\tToken: $cachedToken.value\n}"}},"transitions":[{"inputs":{},"id":452,"target":{"id":329},"position":"110,40 110,160","sourceConnector":"bottom","targetConnector":"top"}],"id":335,"action":"gcx:wf:core::ConvertToJson","position":"-10,-50","title":"Token Json","description":"Format token data as JSON string","name":"tokenJson"},{"inputs":{"url":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json.subWorkflows.cityworksRequest","source":"$wfInputs.json.subWorkflows.cityworksRequest"},"arguments":{"accessors":["$wfInputs","$wfInputs","$cachedToken","$tokenJson"],"annotations":[{"kind":"idref","index":5,"count":9},{"kind":"idref","index":35,"count":9},{"kind":"idref","index":86,"count":12},{"kind":"idref","index":116,"count":10}],"code":"{ url: $wfInputs.json.cityworksUrl + $wfInputs.json.paths.validateToken, data: \"token=\" + $cachedToken.value + \"&data=\" + $tokenJson.json, type: \"POST\" }","source":"{url:$wfInputs.json.cityworksUrl + $wfInputs.json.paths.validateToken, data:\"token=\" +$cachedToken.value+ \"&data=\" +$tokenJson.json, type:\"POST\"}"}},"transitions":[{"inputs":{},"id":353,"target":{"id":341},"position":"110,250 110,310","sourceConnector":"bottom"}],"id":329,"action":"gcx:wf:core::RunWorkflow","description":"Validate the token","position":"-10,160","title":"Validate Token","name":"validateTokenRequest"},{"inputs":{"condition":{"accessors":["$validateTokenRequest","$validateTokenRequest","$validateTokenRequest"],"annotations":[{"kind":"idref","index":7,"count":21},{"kind":"idref","index":62,"count":21},{"kind":"idref","index":120,"count":21}],"code":"typeof ($validateTokenRequest.result) != \"undefined\" && typeof ($validateTokenRequest.result.response) != \"undefined\" && $validateTokenRequest.result.response.success == true","source":"typeof($validateTokenRequest.result) != \"undefined\" && typeof($validateTokenRequest.result.response) != \"undefined\" &&  $validateTokenRequest.result.response.success == true"}},"transitions":[{"inputs":{},"id":349,"target":{"id":339},"branch":"true","position":"-10,355 -30,355 -30,510 120,510 120,530","sourceConnector":"left"},{"inputs":{},"id":351,"target":{"id":331},"branch":"false","position":"230,355 380,360","sourceConnector":"right","targetConnector":"left"}],"id":341,"action":"gcx:wf:core::If","position":"-10,310","title":"If","description":"Is response valid?"},{"inputs":{"condition":{"accessors":["$validateTokenRequest"],"annotations":[{"kind":"idref","index":0,"count":21}],"code":"$validateTokenRequest.result.response.responseJson.Value == true","source":"$validateTokenRequest.result.response.responseJson.Value == true"}},"transitions":[{"inputs":{},"id":347,"target":{"id":331},"branch":"false","position":"240,575 500,575 500,390","sourceConnector":"right","targetConnector":"bottom"},{"inputs":{},"id":345,"target":{"id":337},"branch":"true","position":"0,575 -210,580","sourceConnector":"left"}],"id":339,"action":"gcx:wf:core::If","position":"0,530","title":"If","description":"Is the token valid?"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"failed\"","source":"$wfNav.result = \"failed\""}},"id":331,"action":"gcx:wf:core::Evaluate","position":"380,330","title":"Set Navigation to failed","name":"evaluate3"},{"inputs":{"expression":{"accessors":["$wfNav"],"annotations":[{"kind":"idref","index":0,"count":6}],"code":"$wfNav.result = \"next\"","source":"$wfNav.result = \"next\""}},"id":337,"action":"gcx:wf:core::Evaluate","position":"-450,550","title":"Set Navigation to next","name":"evaluate4"}],"id":327},{"steps":[{"inputs":{},"transitions":[{"inputs":{},"id":365,"target":{"id":361},"position":"90,60 90,110"}],"id":359,"purpose":"start","title":"Catch","position":"0,0"},{"inputs":{"name":"authenticated","value":false},"transitions":[{"inputs":{},"id":367,"target":{"id":363},"position":"90,140 90,190"}],"id":361,"action":"gcx:wf:core::SetWorkflowOutput","position":"-30,110","title":"Set Workflow Output"},{"inputs":{"message":{"accessors":["$authenticationTryCatch"],"annotations":[{"kind":"idref","index":0,"count":23}],"code":"$authenticationTryCatch.error.message","source":"$authenticationTryCatch.error.message"}},"id":363,"action":"gcx:wf:core::Log","position":"-30,190","title":"Log"}],"id":357},{"steps":[{"inputs":{"expression":"next"},"transitions":[{"inputs":{},"id":18,"target":{"id":14},"position":"90,220 90,270","sourceConnector":"bottom"}],"id":12,"action":"gcx:wf:core::CreateValue","position":"-30,110","title":"Create Value","description":"A variable used for navigating between containers","name":"formNav"},{"inputs":{},"transitions":[{"inputs":{},"id":20,"target":{"id":12},"position":"90,60 90,110"}],"id":16,"purpose":"start","title":"Container","position":"0,0"},{"inputs":{"message":{"accessors":["$wfInputs"],"annotations":[{"kind":"idref","index":0,"count":9}],"code":"$wfInputs.json","source":"$wfInputs.json"}},"id":439,"action":"gcx:wf:core::Log","position":"-30,570","title":"Log"},{"inputs":{"url":{"accessors":["$inputs"],"annotations":[{"kind":"idref","index":0,"count":7}],"code":"$inputs.inputs.workflowArgumentsUrl","source":"$inputs.inputs.workflowArgumentsUrl"},"method":"GET","headers":{"accessors":[],"annotations":[],"code":"{ \"Content-Type\": \"text/plain\" }","source":"{\"Content-Type\": \"text/plain\"}"},"expect":"json"},"transitions":[{"inputs":{},"id":440,"target":{"id":439},"position":"90,520 90,570","sourceConnector":"bottom","targetConnector":"top"}],"id":10,"action":"gcx:wf:core:request:WebRequest","description":"Get the Workflow arguments from the citworks_config.json file.","position":"-30,410","title":"Arguments","name":"wfInputs"},{"inputs":{},"transitions":[{"inputs":{},"id":22,"target":{"id":10},"position":"90,360 90,410","sourceConnector":"bottom"}],"id":14,"action":"gcx:wf:core::GetWorkflowInputs","description":"Get workflow arguments Url.  ","position":"-30,270","title":"Get Workflow Inputs","name":"inputs"}],"id":8}],"forms":[{"defaults":{},"elements":{"header":{"type":"Header","section":"header","title":{"markdown":"Cityworks Authentication"}},"image1":{"enabled":true,"type":"Image","index":0,"value":"https://mottesen-cityworks.github.io/wab_wf5_assignments/images/LogoFullColorFullStack.png","size":{"height":105,"width":350}},"loginFailedText":{"enabled":true,"type":"Text","description":{"markdown":"### Invalid Username or Password"},"index":1,"visible":false},"username":{"enabled":true,"type":"TextBox","title":{"markdown":"Username:"},"index":2},"password":{"enabled":true,"type":"PasswordBox","title":{"markdown":"Password:"},"require":true,"index":3},"footer":{"enabled":true,"type":"ButtonBar","items":{"0":{"index":0,"label":{"markdown":"Login"},"value":"login","validates":true,"default":true},"1":{"index":1,"label":{"markdown":"Cancel"},"value":"cancel","validates":false}},"section":"footer"}},"id":369},{"defaults":{},"elements":{"header":{"type":"Header","section":"header","title":{"markdown":"Investigate Service Request"}},"text1":{"enabled":true,"type":"Text","description":{"markdown":"**No results found in search area. Please pan the map to a location that includes Service Requests.**"},"index":0,"visible":true},"footer":{"enabled":true,"type":"ButtonBar","items":{"0":{"index":0,"label":{"markdown":"Re-Query Map"},"value":"back","validates":true,"default":true},"1":{"index":1,"label":{"markdown":"Close"},"value":"exit","validates":false}},"section":"footer"}},"id":657},{"defaults":{},"elements":{"header":{"type":"Header","section":"header","title":{"markdown":"Investigate Service Request"}},"image1":{"enabled":true,"type":"Image","index":0,"value":"https://mottesen-cityworks.github.io/wab_wf5_assignments/images/LogoFullColorFullStack.png","size":{"height":105,"width":350}},"serviceRequestItems":{"enabled":true,"prompt":{"markdown":"Filter items"},"selectionMode":"single","showFilter":false,"type":"ItemPicker","title":{"markdown":"Service Requests"},"index":1,"require":true,"visible":true,"description":{"markdown":"Select the service requests and choose an action"}},"radioGroup1":{"current":"0","enabled":true,"type":"RadioGroup","items":{"0":{"index":0,"label":{"markdown":"Open Service Request"},"value":"open"},"1":{"index":1,"label":{"markdown":"Cancel Service Request"},"value":"cancel"}},"index":2,"require":true,"title":{"markdown":"Action"},"visible":true},"image2":{"enabled":true,"type":"Image","index":3,"value":"https://www.nsgis.com/wp-content/uploads/2016/08/Geocortex-Logo-LG-crop.png","size":{"height":59,"width":350}},"footer":{"enabled":true,"type":"ButtonBar","items":{"0":{"label":{"markdown":"Re-Query Map"},"index":0,"value":"back"},"1":{"label":{"markdown":"Next"},"index":1,"value":"next","validates":true},"2":{"index":2,"label":{"markdown":"Close"},"value":"exit","validates":false}},"section":"footer","visible":true}},"id":659},{"defaults":{},"elements":{"header":{"type":"Header","section":"header","title":{"markdown":"Investigate Service Request"}},"image1":{"enabled":true,"type":"Image","index":0,"value":"https://mottesen-cityworks.github.io/wab_wf5_assignments/images/LogoFullColorFullStack.png","size":{"height":105,"width":350}},"text1":{"enabled":true,"type":"Text","description":{"markdown":""},"index":1,"title":{"markdown":"**Open Service Request**"}},"startTimeText":{"enabled":true,"type":"Text","description":{"markdown":""},"index":2,"title":{"markdown":"Start Time"},"visible":false},"footer":{"enabled":true,"type":"ButtonBar","items":{"0":{"label":{"markdown":"Start Timer"},"index":0,"value":"start","default":true,"validates":true},"1":{"label":{"markdown":"End Timer"},"index":1,"value":"end"},"2":{"label":{"markdown":"Route"},"index":2,"value":"route"},"3":{"index":3,"label":{"markdown":"Done"},"value":"submit","validates":true,"default":true}},"section":"footer"}},"id":590},{"defaults":{},"elements":{"header":{"type":"Header","section":"header","title":{"markdown":"Start Time"}},"startDateTimePicker":{"enabled":true,"type":"DateTimePicker","title":{"markdown":"Enter Start Date/Time for Labor Hours"},"index":0,"require":true},"footer":{"enabled":true,"type":"ButtonBar","items":{"0":{"index":0,"label":{"markdown":"Submit"},"value":"submit","validates":true,"default":true},"1":{"index":1,"label":{"markdown":"Cancel"},"value":"cancel","validates":false}},"section":"footer"}},"id":644}],"transitions":[{"inputs":{},"id":562,"source":{"id":554},"target":{"id":559},"branch":"content"},{"inputs":{},"id":662,"source":{"id":594},"target":{"id":572},"branch":"load$text1"},{"inputs":{},"id":479,"source":{"id":594},"target":{"id":473},"branch":"clicked$footer"},{"inputs":{},"id":877,"source":{"id":875},"target":{"id":841},"branch":"content"},{"inputs":{},"id":560,"source":{"id":550},"target":{"id":556},"branch":"content"},{"inputs":{},"id":903,"source":{"id":901},"target":{"id":891},"branch":"content"},{"inputs":{},"id":663,"source":{"id":661},"target":{"id":531},"branch":"content"},{"inputs":{},"id":612,"source":{"id":608},"target":{"id":600},"branch":"loop"},{"inputs":{},"id":667,"source":{"id":551},"target":{"id":615},"branch":"populate$serviceRequestItems"},{"inputs":{},"id":665,"source":{"id":551},"target":{"id":635},"branch":"changed$serviceRequestItems"},{"inputs":{},"id":582,"source":{"id":551},"target":{"id":580},"branch":"load$serviceRequestItems"},{"inputs":{},"id":669,"source":{"id":545},"target":{"id":587},"branch":"loop"},{"inputs":{},"id":809,"source":{"id":807},"target":{"id":763},"branch":"loop"},{"inputs":{},"id":220,"source":{"id":218},"target":{"id":200},"branch":"content"},{"inputs":{},"id":80,"source":{"id":78},"target":{"id":60},"branch":"content"},{"inputs":{},"id":130,"source":{"id":127},"target":{"id":129},"branch":"loop"},{"inputs":{},"id":52,"source":{"id":50},"target":{"id":32},"branch":"content"},{"inputs":{},"id":375,"source":{"id":371},"target":{"id":114},"branch":"try"},{"inputs":{},"id":383,"source":{"id":163},"target":{"id":241},"branch":"content"},{"inputs":{},"id":381,"source":{"id":151},"target":{"id":261},"branch":"content"},{"inputs":{},"id":379,"source":{"id":135},"target":{"id":317},"branch":"load$loginFailedText"},{"inputs":{},"id":487,"source":{"id":484},"target":{"id":486},"branch":"content"},{"inputs":{},"id":377,"source":{"id":133},"target":{"id":333},"branch":"content"},{"inputs":{},"id":373,"source":{"id":371},"target":{"id":359},"branch":"catch"},{"inputs":{},"id":26,"source":{"id":24},"target":{"id":16},"branch":"content"}],"designerVersion":"5.11.1+3","deploymentConfig":{"supportedApps":{"WAB":true},"worksOffline":false},"start":{"id":3},"licenseInfo":{"licenseeId":"0013000000A3WbeAAF"}}